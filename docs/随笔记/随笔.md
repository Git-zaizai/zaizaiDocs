# éšç¬”æ¡£æ¡ˆ


## `vue3` `sfc` å¤šä¸ª `<script lang="tsx">`

`vue3` å¯ä»¥æœ‰å¤šä¸ª `<script>` æ ‡ç­¾ï¼Œä½†æ˜¯å¿…é¡» `lang` çš„å±æ€§è¦ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š

```vue
<script></script>

<script setup lang="tsx">
</script>
```

ä»¥ä¸Šè¿™æ ·æ˜¯ä¸å¯ä»¥çš„ï¼Œ`å¯ä»¥æ²¡æœ‰ä½†ä¸èƒ½ä¸ä¸€æ ·`ï¼Œå¦‚ä¸‹é¢å°±å¯ã€‚

```vue
<script lang="tsx"></script>

<script setup lang="tsx">
</script>
<template></template>
<script lang="tsx"></script>
```

é‚£ä¹ˆè¿™æ ·å­çš„æ„ä¹‰ä½•åœ¨ï¼Œç›®å‰æˆ‘è§‰å¾—å°±æ˜¯æ–¹ä¾¿äº† `å®šä¹‰ä¸€äº›å°ç»„ä»¶`

## tsconfig.json ä¸­çš„ `baseUrl`

::: tip
ä¸€èˆ¬åœ¨vscodeä¸­éƒ½å®‰è£…äº† `Path Intellisense` è¿™ä¸ªæ’ä»¶ï¼Œç„¶åç›´æ¥å®šä¹‰ `baseUrl` ä¸º `./` è¿™æ ·æ›´åŠ æ–¹ä¾¿
:::

ç„¶åæ¥ä¸‹æ¥ç›´æ¥è¿™æ ·

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "baseUrl": "./",
    "paths": {
      "/": ["./docs/*"],
      "/~/*": ["./components/*"]
    },
  },
  "exclude": ["node_modules", ".vite"],
  "include": [
    "./env.d.ts",
    "./components/**/*.ts",
    "./components/*.ts",
    "./components/*.vue",
    "./.vitepress/**/*.ts",
    "./docs/**/**.ts"
  ]
}

```

## vueä»£ç†é—®é¢˜

ä¼—æ‰€å‘¨çŸ¥æœåŠ¡å™¨ä¸æœåŠ¡å™¨ä¹‹é—´æ˜¯æ²¡æœ‰è·¨åŸŸé—®é¢˜çš„

`vue cli` æˆ–è€… `vite` çš„ä»£ç†éƒ½æ˜¯é€šè¿‡æ‹¦æˆªè¯·æ±‚åï¼Œä½¿ç”¨æœ¬åœ°nodeè¯·æ±‚åˆ°åç«¯ï¼Œç„¶ååœ¨ä»åç«¯è¿”å›åˆ°nodeåœ¨è¿”å›åˆ°æµè§ˆå™¨

![ä»£ç†æµç¨‹](./img/ä»£ç†æµç¨‹.png)

çœ‹å›¾ï¼Œæ‰€ä»¥è¯·æ±‚æ˜¯éœ€è¦å‘é€åˆ° `3000ç«¯å£` æ‰å¯ä»¥è¢«æ‹¦æˆªåˆ°ï¼Œæ‰€ä»¥æŒ‰ç…§è¿™ä¸ªåŸç†

`ä»£ç†é…ç½®`:

``` ts
import { defineConfig, loadEnv } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig(configEnv => {
  return {
    plugins: [
      vue(),
    ],
    base: '/',
    server: {
      host: '0.0.0.0',
      port: 3000,
      proxy: {
        '/api': {
          target: 'https://www.xxxx.com',  // ç›®æ ‡åœ°å€
          changeOrigin: true,
          rewrite: (path) => {
            console.log("ğŸš€ ~ path:", path)
            return path.replace(/^\/api/, '')
          }
        }
      }
    },
  }
})
```

`axiosçš„baseURL:` æ˜¯éœ€è¦ç•™ç©ºçš„

``` ts
const request = axios.create({
	baseURL: '' // åç«¯åŸŸåæ¥å£
});
```

å½“ä½ å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯”å¦‚ï¼š`https://www.xxxx.com/api/get/list` è¿™æ ·çš„æ¥å£æ—¶ï¼Œåœ¨å¼€æ”¾ç¯å¢ƒä¸‹ `baseURL`ç•™ç©ºï¼Œé‚£å‘å‡ºçš„è¯·æ±‚å°±æ˜¯ `http://localhost:3000/api/get/list` è¿™æ · `vite \ vue cli` æ‰èƒ½æ‹¦æˆªåˆ°è¯·æ±‚

::: danger åŸç†ï¼š
å¦‚æœä½ çš„ `baseURL` ä¸ç•™ç©ºï¼Œæµè§ˆå™¨å°±ç›´æ¥è¯·æ±‚äº† `https://www.xxxx.com/api/get/list`ï¼Œæ²¡æœ‰ç»è¿‡ `3000` ç«¯å£ï¼Œ`vite \ vue cli` æ‹¦æˆªä¸äº†æ‰€ä»¥å°±ä¼šä»£ç†å¤±è´¥
::: 

æ‹¦æˆªåˆ°è¯·æ±‚ä¼šæŠŠ `url` æ›¿æ¢ 

`http://localhost:3000/api/get/list` ==> `https://www.xxxx.com/api/get/list`

ç„¶åä½¿ç”¨nodeå‘é€è¯·æ±‚è¿™æ ·å°±ä¸ä¼šæœ‰è·¨åŸŸé—®é¢˜äº†



## vue2 è®©dataä¸­çš„å˜é‡ä¸è¿›è¡Œä»£ç†

å¸¸ç”¨æ–¹å¼

object.frezeeï¼Œobject.sealï¼Œobject.preventExtensionInfo æ–¹æ³•ï¼Œå¯èƒ½ç°ç›®å‰çœ‹èµ·æ¥æœ€åˆé€‚çš„æ–¹å¼

ç„¶åè¿˜æœ‰è¿™ä¸ªåœ¨ vue çš„å®˜ç½‘ä¸­æ˜¯è¿™æ ·æè¿°çš„
![](./img/è®©dataä¸­çš„å˜é‡ä¸è¿›è¡Œä»£ç†1.png)

```vue
<template>
    <div class="home-page">
        <span>{{_dataInfo}}</span>
        <span>{{$dataInfo}}</span>
        <span>{{dataInfo}}</span>
    </div>
</template>

<script>
    export default {
        name: 'home',
        data() {
            return {
                _dataInfo: '',
                $dataInfo: '',
                dataInfo: '',
            };
        },
        created() {
            this._dataInfo = { name: 'data' };
            this.$dataInfo = { name: 'data' };
            this.dataInfo = { name: 'data' };
        },
        mounted() {
            console.info(this._dataInfo);
            console.info(this.$dataInfo);
            console.info(this.dataInfo);
        },
    };
</script>
```
å±æ€§åç”¨_æˆ–è€…$,å› ä¸ºå¤æ‚å¯¹è±¡ä¼šè¢«ä»£ç†ï¼Œè€Œä¸”åœ¨ template ä¸­è¯»å–å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å¹¶ä¸å»ºè®®ç”¨äºè¦æ˜¾ç¤ºçš„å­—æ®µï¼Œååˆ°æ˜¯ä¸€äº›ä¸éœ€è¦ä»£ç†å¹¶ä¸”éœ€è¦å…¨å±€ç¼“å­˜çš„å±æ€§ï¼Œå¦‚å…¨å±€è¦ç”¨çš„domå¯¹è±¡æˆ–echarts sç”¨è¿™ä¸ªåœ¨åˆé€‚ä¸è¿‡


## element vue2 å…³äºtableæ–‡å­—è¿‡é•¿çš„é—®é¢˜

æ¯”å¦‚ï¼šä¸‹é¢çš„ä»£ç  è™½ç„¶ä½¿ç”¨äº† `slot-scope="scope"` ä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ show-overflow-tooltipï¼Œä¸è¿‡è¦è‡ªè¡Œè®¾ç½®æ–‡å­—çœç•¥

```vue
<el-table-column prop="Name" label="è€ƒæ ¸æŒ‡æ ‡" align="left" show-overflow-tooltip>
          <template slot-scope="scope">
            <span class="c6194f7">
              <span
                v-show="scope.row.IsGroup === 'æ˜¯'"
                class="star"
                title="é›†å›¢è€ƒæ ¸"
              >
                ï€…
              </span>
              <s>{{ scope.row.Name }}</s>
            </span>
          </template>
        </el-table-column>
<style>
.c6194f7 {
  display: block;
  text-align: left;
  width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  line-height: 1.25em;
}
</style>
```

## vue3 props ä½¿ç”¨ ts ç»§æ‰¿çš„æ–¹å¼å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜

```vue
<script setup lang="ts">
import type { MenuProps, MenuOption } from 'naive-ui'
import Iconify from '@/components/Iconify.vue'
import { type RouteRecordRaw, RouterLink } from 'vue-router'
import { isComponent } from '@/utils'

defineOptions({
  name: 'zai-menu',
})

interface Props extends MenuProps {
  routeName?: string
  routePath?: string
  router?: boolean
}
const { collapsedWidth = 64, collapsedIconSize = 22, ...props } = defineProps<Props>()
</script>

<template>
  <n-menu
    v-bind="props"
    :collapsed-width="collapsedWidth"
    :collapsed-icon-size="collapsedIconSize"
  />
</template>

```

::: tip
è¿™æ ·ä¼šå¯¼è‡´å‡ºç°ä¸€äº›é—®é¢˜ï¼Œå æ—¶ä¸ºæŸ¥å‡ºé—®é¢˜  å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼
:::

```vue
<script setup lang="ts">
import type { MenuOption } from 'naive-ui'
import { menuProps } from 'naive-ui'
import Iconify from '@/components/Iconify.vue'
import { type RouteRecordRaw, RouterLink } from 'vue-router'
import { isComponent } from '@/utils'

defineOptions({
  name: 'zai-menu',
})

const props = defineProps({
  ...menuProps,
  routeName: {
    type: String,
    default: '',
  },
  routePath: {
    type: String,
    default: '',
  },
  router: {
    type: Boolean,
    default: false,
  },
  collapsedWidth: {
    type: Number,
    default: 48,
  },
  collapsedIconSize: {
    type: Number,
    default: 22,
  },
})

</script>

<template>
  <n-menu
    v-bind="props"
    :collapsed-width="props.collapsedWidth"
    :collapsed-icon-size="props.collapsedIconSize"
  />
</template>

```

## vscodeè¿æ¥linux

å‚è€ƒï¼šhttps://blog.csdn.net/qq_22841387/article/details/143094904

::: tip
ç„¶åå¦‚æœåœ¨é¡¹ç›®ä¸­æœ‰ `ts` ï¼Œç„¶åä½ çš„æœåŠ¡å™¨å¸¦å®½åˆä¸é«˜ï¼Œæœ€å¥½ç¦æ‰vscodeçš„tsæ’ä»¶ï¼Œ
å› ä¸º`ä¸€æ‰“å¼€tsæ–‡ä»¶vscodeå°±ä¼šåŠ è½½tsconig.json`ï¼Œç„¶åä¼šåˆ†ææ–‡ä»¶ä¸­çš„ç±»å‹ï¼Œåšå„ç§äº‹æƒ…ï¼Œ
ç»“æœå°±æ˜¯ `å®½å¸¦è¢«å æ»¡äº†`,ç„¶åå°±å¡ä½
:::

æ“ä½œæ–¹æ³•ï¼š

ç™»é™†å®Œæˆåï¼Œæ‰“å¼€vscodeçš„æ’ä»¶æœç´¢ `@builtin typescript`

![alt text](./img/ç¦æ‰vscodeçš„tsæ’ä»¶.png)

::: tip
æœ¬åœ°çš„ä¹Ÿä¼šè¢«ç¦ç”¨ï¼Œä½¿ç”¨å®Œæ¯•è®°å¾—å¼€æ”¾ã€‚  åç»­åœ¨æ”¹è¿›
:::



## docker nginx æ— æ³•è®¿é—® 127.0.0.1:xxxx

æ¯”å¦‚çš„nginxæ–‡ä»¶æ—¶è¿™æ ·çš„ï¼Œ

```bash
server {
    listen       9002;
    listen  [::]:80;
    server_name  localhost;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }

    location ^~ /server {
        proxy_pass http://127.0.0.1:7379/;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}

```
ä½ è¦è½¬å‘ /server åˆ° 7379ç«¯å£ï¼Œç„¶åæ— æ³•è®¿é—®ï¼Œnginxæ—¥å¿—æ—¶è¿™æ ·çš„

```bash
2025/02/17 08:38:05 [error] 22#22: *4 the rewritten URI has a zero length, client: 183.58.13.103, server: localhost, request: "GET /server HTTP/1.1", host: "118.193.47.111"
```

é‚£æœ‰å¯èƒ½æ—¶å› ä¸º

1. Docker å®¹å™¨çš„ç½‘ç»œéš”ç¦»
   Docker å®¹å™¨é»˜è®¤è¿è¡Œåœ¨ç‹¬ç«‹çš„ç½‘ç»œå‘½åç©ºé—´ä¸­ï¼Œå®¹å™¨å†…çš„ 127.0.0.1 å¹¶ä¸æŒ‡å‘å®¿ä¸»æœºçš„ 127.0.0.1ï¼Œè€Œæ˜¯å®¹å™¨è‡ªå·±çš„å›ç¯æ¥å£ã€‚å› æ­¤ï¼ŒNginx å®¹å™¨å†…çš„ 127.0.0.1:7379 æ— æ³•è®¿é—®å®¿ä¸»æœºä¸Šçš„ Bun æœåŠ¡ã€‚
Nginx é…ç½®ä¸­çš„ proxy_pass ç›®æ ‡åœ°å€é”™è¯¯
å¦‚æœ proxy_pass çš„ç›®æ ‡åœ°å€æ˜¯ http://127.0.0.1:7379/ï¼Œé‚£ä¹ˆ Nginx å®¹å™¨ä¼šå°è¯•è®¿é—®å®¹å™¨å†…éƒ¨çš„ 127.0.0.1ï¼Œè€Œä¸æ˜¯å®¿ä¸»æœºçš„ 127.0.0.1ã€‚

è§£å†³æ–¹æ¡ˆ:
ä½¿ç”¨å®¿ä¸»æœºçš„ IP åœ°å€
åœ¨ Nginx é…ç½®ä¸­ï¼Œå°† proxy_pass çš„ç›®æ ‡åœ°å€æ”¹ä¸ºå®¿ä¸»æœºçš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ 127.0.0.1ã€‚ä¾‹å¦‚ï¼š
è·å–å®¿ä¸»æœºçš„å†…ç½‘ IP åœ°å€ï¼ˆå‡è®¾æ˜¯ 192.168.1.100ï¼‰ã€‚
ä¿®æ”¹ Nginx é…ç½®ä¸­çš„ proxy_passï¼š

```bash
location ^~ /bun-server {
    proxy_pass http://192.168.1.100:7379/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    rewrite ^/bun-server/(.*)$ /$1 break;
}
```