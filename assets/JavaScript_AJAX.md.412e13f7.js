import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.1fc80e1c.js";const d=JSON.parse('{"title":"一、简介","description":"","frontmatter":{},"headers":[],"relativePath":"JavaScript/AJAX.md","filePath":"JavaScript/AJAX.md","lastUpdated":1696832263000}'),p={name:"JavaScript/AJAX.md"},o=l(`<h1 id="一、简介" tabindex="-1">一、简介 <a class="header-anchor" href="#一、简介" aria-label="Permalink to &quot;一、简介&quot;">​</a></h1><p>AJAX全称为Asynchronous JavaScript And XML，就是异步的Js和XML。通过AJAX可以在浏览器中向服务器发送异步请求，最大的优势：无刷新获取数据。AJAX不是新的编程语言，而是一种将现有的标准组合在一起使用的新方式。</p><h1 id="二、ajax-的优缺点" tabindex="-1">二、Ajax 的优缺点 <a class="header-anchor" href="#二、ajax-的优缺点" aria-label="Permalink to &quot;二、Ajax 的优缺点&quot;">​</a></h1><h2 id="_1、优点" tabindex="-1">1、优点 <a class="header-anchor" href="#_1、优点" aria-label="Permalink to &quot;1、优点&quot;">​</a></h2><h3 id="_1-可以无需刷新页面而与服务器端进行通信。" tabindex="-1">① 可以无需刷新页面而与服务器端进行通信。 <a class="header-anchor" href="#_1-可以无需刷新页面而与服务器端进行通信。" aria-label="Permalink to &quot;① 可以无需刷新页面而与服务器端进行通信。&quot;">​</a></h3><h3 id="_2-允许你根据用户事件-鼠标、键盘、表单、文档-来更新部分页面内容。" tabindex="-1">② 允许你根据用户事件（鼠标、键盘、表单、文档）来更新部分页面内容。 <a class="header-anchor" href="#_2-允许你根据用户事件-鼠标、键盘、表单、文档-来更新部分页面内容。" aria-label="Permalink to &quot;② 允许你根据用户事件（鼠标、键盘、表单、文档）来更新部分页面内容。&quot;">​</a></h3><h2 id="_1、缺点" tabindex="-1">1、缺点 <a class="header-anchor" href="#_1、缺点" aria-label="Permalink to &quot;1、缺点&quot;">​</a></h2><h3 id="_1-没有浏览历史不能回退" tabindex="-1">① 没有浏览历史不能回退 <a class="header-anchor" href="#_1-没有浏览历史不能回退" aria-label="Permalink to &quot;① 没有浏览历史不能回退&quot;">​</a></h3><h3 id="_2-存在跨域问题-同源" tabindex="-1">② 存在跨域问题（同源） <a class="header-anchor" href="#_2-存在跨域问题-同源" aria-label="Permalink to &quot;② 存在跨域问题（同源）&quot;">​</a></h3><h3 id="_3-seo-搜索引擎-不友好" tabindex="-1">③ SEO（搜索引擎）不友好 <a class="header-anchor" href="#_3-seo-搜索引擎-不友好" aria-label="Permalink to &quot;③ SEO（搜索引擎）不友好&quot;">​</a></h3><h1 id="三、http请求" tabindex="-1">三、HTTP请求 <a class="header-anchor" href="#三、http请求" aria-label="Permalink to &quot;三、HTTP请求&quot;">​</a></h1><p>解释：HTTP (hypertext transport protocol)协议『超文本传输协议』，协议详细规定了浏览器和万维网服务器之间互相通信的规则。</p><h2 id="_1、包含内容" tabindex="-1">1、包含内容 <a class="header-anchor" href="#_1、包含内容" aria-label="Permalink to &quot;1、包含内容&quot;">​</a></h2><h3 id="_1-请求报文" tabindex="-1">① 请求报文 <a class="header-anchor" href="#_1-请求报文" aria-label="Permalink to &quot;① 请求报文&quot;">​</a></h3><p>重点是格式与参数</p><ul><li>请求行（包含如下） <ul><li>请求类型：GET、POST、DELETE、PUT</li><li>URL：路径参数</li><li>HTTP版本：有1.0、1.1、2.0即 HTTP/1.1</li></ul></li><li>请求头 <ul><li>Host：请求将要发送到的服务器主机名和端口号</li><li>Cookie：是服务器发送到用户浏览器并保存在本地的一小块数据。 浏览器会存储cookie 并在下次向同一服务器再发起请求时携带并发送到服务器上。用于告知服务端两个请求是否来自同一浏览器——如保持用户的登录状态。</li><li>Content-Type：请求数据类型</li><li>User-agent：（例如：“Chrome 83”） <ul><li>1、统计用户浏览器使用情况。 有些浏览器说被多少人使用了，实际上就可以通过判断每个IP的UA来确定这个IP是用什么浏览器访问的，以得到使用量的数据。</li><li>2、根据用户使用浏览器的不同，显示不同的排版从而为用户提供更好的体验</li></ul></li></ul></li><li>请求空行</li><li>请求体：（可空，例如：“username=admin&amp;password=admin”） <ul><li>GET请求：内容为空</li><li>POST请求：可以不为空</li></ul></li></ul><h3 id="_2-响应报文" tabindex="-1">② 响应报文 <a class="header-anchor" href="#_2-响应报文" aria-label="Permalink to &quot;② 响应报文&quot;">​</a></h3><ul><li>响应行（包含如下） <ul><li>HTTP协议版本：有1.0、1.1、2.0即 HTTP/1.1</li><li>响应状态码：如：403、404、401、200、500、505等</li><li>响应字符串：如：OK</li></ul></li><li>响应头 <ul><li>Content-Type：请求数据类型（text/html; charset=utf-8）</li><li>Content-length：响应长度（2048）</li><li>Content-encoding：压缩方式（gzip）</li></ul></li><li>响应空行</li><li>响应体：JSON</li></ul><h1 id="四、ajax-基本使用" tabindex="-1">四、Ajax 基本使用 <a class="header-anchor" href="#四、ajax-基本使用" aria-label="Permalink to &quot;四、Ajax 基本使用&quot;">​</a></h1><h2 id="_1、get-请求" tabindex="-1">1、GET 请求 <a class="header-anchor" href="#_1、get-请求" aria-label="Permalink to &quot;1、GET 请求&quot;">​</a></h2><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;点击发送请求&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;result&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 获取元素</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">btn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementsByTagName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;button&#39;</span><span style="color:#E1E4E8;">)[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementsByClassName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;result&#39;</span><span style="color:#E1E4E8;">)[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 绑定事件</span></span>
<span class="line"><span style="color:#E1E4E8;">      btn.</span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 1.创建对象</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">xhr</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">XMLHttpRequest</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 2.初始化 设置请求方法和url</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;get&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8000/server&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 3.发送</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">/** 4.事件绑定 处理服务端返回结果</span></span>
<span class="line"><span style="color:#6A737D;">         * on  when 当……时候</span></span>
<span class="line"><span style="color:#6A737D;">         * readystate 是 xhr 对象中的属性，表示状态 0 1 2 3 4</span></span>
<span class="line"><span style="color:#6A737D;">         * change 改变</span></span>
<span class="line"><span style="color:#6A737D;">         * **/</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">onreadystatechange</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">// 判断</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (xhr.readyState </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 判断响应状态码</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (xhr.status </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> xhr.status </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;">// 处理结果</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.status------&#39;</span><span style="color:#E1E4E8;">, xhr.status); </span><span style="color:#6A737D;">// 状态码</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.statusText------&#39;</span><span style="color:#E1E4E8;">, xhr.statusText); </span><span style="color:#6A737D;">// 状态字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.getAllResponseHeaders------&#39;</span><span style="color:#E1E4E8;">, xhr.</span><span style="color:#B392F0;">getAllResponseHeaders</span><span style="color:#E1E4E8;">());</span><span style="color:#6A737D;">// 所有响应头</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.响应体------&#39;</span><span style="color:#E1E4E8;">, xhr.response); </span><span style="color:#6A737D;">// 响应体</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;">// 设置 result 的文本</span></span>
<span class="line"><span style="color:#E1E4E8;">                result.innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> xhr.response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        };</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;点击发送请求&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;result&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 获取元素</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">btn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">getElementsByTagName</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;button&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">getElementsByClassName</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;result&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 绑定事件</span></span>
<span class="line"><span style="color:#24292E;">      btn.</span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1.创建对象</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">xhr</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">XMLHttpRequest</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2.初始化 设置请求方法和url</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">open</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;get&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;http://127.0.0.1:8000/server&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3.发送</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">/** 4.事件绑定 处理服务端返回结果</span></span>
<span class="line"><span style="color:#6A737D;">         * on  when 当……时候</span></span>
<span class="line"><span style="color:#6A737D;">         * readystate 是 xhr 对象中的属性，表示状态 0 1 2 3 4</span></span>
<span class="line"><span style="color:#6A737D;">         * change 改变</span></span>
<span class="line"><span style="color:#6A737D;">         * **/</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">onreadystatechange</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6A737D;">// 判断</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (xhr.readyState </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 判断响应状态码</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (xhr.status </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> xhr.status </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">300</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6A737D;">// 处理结果</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.status------&#39;</span><span style="color:#24292E;">, xhr.status); </span><span style="color:#6A737D;">// 状态码</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.statusText------&#39;</span><span style="color:#24292E;">, xhr.statusText); </span><span style="color:#6A737D;">// 状态字符串</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.getAllResponseHeaders------&#39;</span><span style="color:#24292E;">, xhr.</span><span style="color:#6F42C1;">getAllResponseHeaders</span><span style="color:#24292E;">());</span><span style="color:#6A737D;">// 所有响应头</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.响应体------&#39;</span><span style="color:#24292E;">, xhr.response); </span><span style="color:#6A737D;">// 响应体</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6A737D;">// 设置 result 的文本</span></span>
<span class="line"><span style="color:#24292E;">                result.innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> xhr.response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">          }</span></span>
<span class="line"><span style="color:#24292E;">        };</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="_2、post-请求" tabindex="-1">2、POST 请求 <a class="header-anchor" href="#_2、post-请求" aria-label="Permalink to &quot;2、POST 请求&quot;">​</a></h2><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 获取元素</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.result&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 绑定监听事件</span></span>
<span class="line"><span style="color:#E1E4E8;">      result.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mouseover&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 1.创建对象</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">xhr</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">XMLHttpRequest</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 2.初始化 设置 &#39;请求类型&#39; 与 &#39;URL&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;POST&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8000/server&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 3.发送请求</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 4.处理返回结果</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">onreadystatechange</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (xhr.readyState </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (xhr.status </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> xhr.status </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr----&#39;</span><span style="color:#E1E4E8;">, xhr);</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.response----&#39;</span><span style="color:#E1E4E8;">, xhr.response);</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.responseURL----&#39;</span><span style="color:#E1E4E8;">, xhr.responseURL);</span></span>
<span class="line"><span style="color:#E1E4E8;">              result.innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> xhr.response;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        };</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 获取元素</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">querySelector</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.result&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 绑定监听事件</span></span>
<span class="line"><span style="color:#24292E;">      result.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mouseover&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1.创建对象</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">xhr</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">XMLHttpRequest</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2.初始化 设置 &#39;请求类型&#39; 与 &#39;URL&#39;</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">open</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;POST&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;http://127.0.0.1:8000/server&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3.发送请求</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 4.处理返回结果</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">onreadystatechange</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (xhr.readyState </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (xhr.status </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> xhr.status </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">300</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr----&#39;</span><span style="color:#24292E;">, xhr);</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.response----&#39;</span><span style="color:#24292E;">, xhr.response);</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.responseURL----&#39;</span><span style="color:#24292E;">, xhr.responseURL);</span></span>
<span class="line"><span style="color:#24292E;">              result.innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> xhr.response;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">          }</span></span>
<span class="line"><span style="color:#24292E;">        };</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_1-post-添加请求体" tabindex="-1">① POST 添加请求体 <a class="header-anchor" href="#_1-post-添加请求体" aria-label="Permalink to &quot;① POST 添加请求体&quot;">​</a></h3><p><strong>send() 中</strong>可设置【任意类型】【任意数据】只要后端能处理</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"> // 类型1</span></span>
<span class="line"><span style="color:#E1E4E8;">xhr.send(&#39;a=100&amp;b=200&amp;c=300&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> // 类型2</span></span>
<span class="line"><span style="color:#E1E4E8;">xhr.send(&#39;a:100&amp;b:200&amp;c:300&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> // 类型3</span></span>
<span class="line"><span style="color:#E1E4E8;">const data = {</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: &#39;wqf&#39;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        age: 22,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">// 转换成 URL 传参格式（ name:wqf&amp;age:22）</span></span>
<span class="line"><span style="color:#E1E4E8;">const urlParms = new URLSearchParams(data);</span></span>
<span class="line"><span style="color:#E1E4E8;"> xhr.send(urlParms);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> // 类型1</span></span>
<span class="line"><span style="color:#24292E;">xhr.send(&#39;a=100&amp;b=200&amp;c=300&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> // 类型2</span></span>
<span class="line"><span style="color:#24292E;">xhr.send(&#39;a:100&amp;b:200&amp;c:300&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> // 类型3</span></span>
<span class="line"><span style="color:#24292E;">const data = {</span></span>
<span class="line"><span style="color:#24292E;">        name: &#39;wqf&#39;,</span></span>
<span class="line"><span style="color:#24292E;">        age: 22,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">// 转换成 URL 传参格式（ name:wqf&amp;age:22）</span></span>
<span class="line"><span style="color:#24292E;">const urlParms = new URLSearchParams(data);</span></span>
<span class="line"><span style="color:#24292E;"> xhr.send(urlParms);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>node.js 中 使用 express.urlencoded 【解析】 并 接收</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 1.引入 express</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">express</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;express&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 2.创建应用对象</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">app</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">express</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 使用 express.urlencoded() 中间件来解析 URL 编码的请求体</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(express.</span><span style="color:#B392F0;">urlencoded</span><span style="color:#E1E4E8;">({ extended: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> }));</span></span>
<span class="line"><span style="color:#6A737D;">// 使用 express.json() 中间件来解析 JSON 请求体</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(express.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * 3.创建路由规则</span></span>
<span class="line"><span style="color:#6A737D;"> * @request：对请求报文的封装</span></span>
<span class="line"><span style="color:#6A737D;"> * @response：对响应报文的封装</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/server&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">request</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 设置响应头  设置允许跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">  response.</span><span style="color:#B392F0;">setHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 设置响应</span></span>
<span class="line"><span style="color:#E1E4E8;">  response.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&lt;h1&gt;根目录默认GET请求成功&lt;/h1&gt;&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/server&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">request</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 设置响应头  设置允许跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">  response.</span><span style="color:#B392F0;">setHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 打印请求中的参数</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;request.body----&#39;</span><span style="color:#E1E4E8;">, request.body);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 设置响应</span></span>
<span class="line"><span style="color:#E1E4E8;">  response.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&lt;h1&gt;根目录默认POST请求成功&lt;/h1&gt;&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 4.监听端口启动服务</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">8000</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;服务已启动……&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 1.引入 express</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">express</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;express&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 2.创建应用对象</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">app</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">express</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// 使用 express.urlencoded() 中间件来解析 URL 编码的请求体</span></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(express.</span><span style="color:#6F42C1;">urlencoded</span><span style="color:#24292E;">({ extended: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> }));</span></span>
<span class="line"><span style="color:#6A737D;">// 使用 express.json() 中间件来解析 JSON 请求体</span></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(express.</span><span style="color:#6F42C1;">json</span><span style="color:#24292E;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * 3.创建路由规则</span></span>
<span class="line"><span style="color:#6A737D;"> * @request：对请求报文的封装</span></span>
<span class="line"><span style="color:#6A737D;"> * @response：对响应报文的封装</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/server&#39;</span><span style="color:#24292E;">, (</span><span style="color:#E36209;">request</span><span style="color:#24292E;">, </span><span style="color:#E36209;">response</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 设置响应头  设置允许跨域</span></span>
<span class="line"><span style="color:#24292E;">  response.</span><span style="color:#6F42C1;">setHeader</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 设置响应</span></span>
<span class="line"><span style="color:#24292E;">  response.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&lt;h1&gt;根目录默认GET请求成功&lt;/h1&gt;&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/server&#39;</span><span style="color:#24292E;">, (</span><span style="color:#E36209;">request</span><span style="color:#24292E;">, </span><span style="color:#E36209;">response</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 设置响应头  设置允许跨域</span></span>
<span class="line"><span style="color:#24292E;">  response.</span><span style="color:#6F42C1;">setHeader</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 打印请求中的参数</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;request.body----&#39;</span><span style="color:#24292E;">, request.body);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 设置响应</span></span>
<span class="line"><span style="color:#24292E;">  response.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&lt;h1&gt;根目录默认POST请求成功&lt;/h1&gt;&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 4.监听端口启动服务</span></span>
<span class="line"><span style="color:#24292E;">app.</span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">8000</span><span style="color:#24292E;">, () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;服务已启动……&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="_3、nodemon-自动重启工具" tabindex="-1">3、nodemon 自动重启工具 <a class="header-anchor" href="#_3、nodemon-自动重启工具" aria-label="Permalink to &quot;3、nodemon 自动重启工具&quot;">​</a></h2><p><a href="https://www.npmjs.com/package/nodemon" target="_blank" rel="noreferrer">nodemon 安装官网</a></p><h3 id="_1-安装与使用" tabindex="-1">① 安装与使用 <a class="header-anchor" href="#_1-安装与使用" aria-label="Permalink to &quot;① 安装与使用&quot;">​</a></h3><p>:::tips npm install -g nodemon nodemon app.js :::</p><h1 id="五、ajax-ie缓存问题" tabindex="-1">五、Ajax IE缓存问题 <a class="header-anchor" href="#五、ajax-ie缓存问题" aria-label="Permalink to &quot;五、Ajax IE缓存问题&quot;">​</a></h1><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 在请求 URL 中加入 【时间戳】 让浏览器认为每次都是新的请求之后就不会走缓存 </span></span>
<span class="line"><span style="color:#E1E4E8;">xhr.</span><span style="color:#B392F0;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;GET&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">\`http://localhost:8000/ie?t=\${</span><span style="color:#E1E4E8;">Date</span><span style="color:#9ECBFF;">.</span><span style="color:#B392F0;">now</span><span style="color:#9ECBFF;">()</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 在请求 URL 中加入 【时间戳】 让浏览器认为每次都是新的请求之后就不会走缓存 </span></span>
<span class="line"><span style="color:#24292E;">xhr.</span><span style="color:#6F42C1;">open</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;GET&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">\`http://localhost:8000/ie?t=\${</span><span style="color:#24292E;">Date</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">now</span><span style="color:#032F62;">()</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="六-、ajax-超时请求与异常处理" tabindex="-1">六 、Ajax 超时请求与异常处理 <a class="header-anchor" href="#六-、ajax-超时请求与异常处理" aria-label="Permalink to &quot;六 、Ajax 超时请求与异常处理&quot;">​</a></h1><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 超时设置 2s 设置</span></span>
<span class="line"><span style="color:#E1E4E8;">xhr.timeout </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2000</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// 设置超时回调</span></span>
<span class="line"><span style="color:#E1E4E8;">xhr.</span><span style="color:#B392F0;">ontimeout</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;网络超时请重试&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 超时设置 2s 设置</span></span>
<span class="line"><span style="color:#24292E;">xhr.timeout </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2000</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// 设置超时回调</span></span>
<span class="line"><span style="color:#24292E;">xhr.</span><span style="color:#6F42C1;">ontimeout</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;网络超时请重试&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="七、ajax-取消请求" tabindex="-1">七、Ajax 取消请求 <a class="header-anchor" href="#七、ajax-取消请求" aria-label="Permalink to &quot;七、Ajax 取消请求&quot;">​</a></h1><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      const btns = document.querySelectorAll(&#39;button&#39;);</span></span>
<span class="line"><span style="color:#E1E4E8;">      const result = document.querySelector(&#39;.result&#39;);</span></span>
<span class="line"><span style="color:#E1E4E8;">      // 创建公共 Ajax</span></span>
<span class="line"><span style="color:#E1E4E8;">      let xhr;</span></span>
<span class="line"><span style="color:#E1E4E8;">      btns[0].addEventListener(&#39;click&#39;, () =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">XMLHttpRequest</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;GET&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;http://localhost:8000/delay?t=&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> Date.</span><span style="color:#B392F0;">now</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">onreadystatechange</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (xhr.readyState </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (xhr.status </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> xhr.status </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xhr.response----&#39;</span><span style="color:#E1E4E8;">, xhr.response);</span></span>
<span class="line"><span style="color:#E1E4E8;">              result.innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> xhr.response;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        };</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">      // abort:终止请求/取消请求</span></span>
<span class="line"><span style="color:#E1E4E8;">      btns[1].addEventListener(&#39;click&#39;, () =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">        xhr.</span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      const btns = document.querySelectorAll(&#39;button&#39;);</span></span>
<span class="line"><span style="color:#24292E;">      const result = document.querySelector(&#39;.result&#39;);</span></span>
<span class="line"><span style="color:#24292E;">      // 创建公共 Ajax</span></span>
<span class="line"><span style="color:#24292E;">      let xhr;</span></span>
<span class="line"><span style="color:#24292E;">      btns[0].addEventListener(&#39;click&#39;, () =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">        xhr </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">XMLHttpRequest</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">open</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;GET&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;http://localhost:8000/delay?t=&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> Date.</span><span style="color:#6F42C1;">now</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">onreadystatechange</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (xhr.readyState </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (xhr.status </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> xhr.status </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">300</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xhr.response----&#39;</span><span style="color:#24292E;">, xhr.response);</span></span>
<span class="line"><span style="color:#24292E;">              result.innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> xhr.response;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">          }</span></span>
<span class="line"><span style="color:#24292E;">        };</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"><span style="color:#24292E;">      // abort:终止请求/取消请求</span></span>
<span class="line"><span style="color:#24292E;">      btns[1].addEventListener(&#39;click&#39;, () =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">        xhr.</span><span style="color:#6F42C1;">abort</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h1 id="八、jquery-发送请求" tabindex="-1">八、jQuery 发送请求 <a class="header-anchor" href="#八、jquery-发送请求" aria-label="Permalink to &quot;八、jQuery 发送请求&quot;">​</a></h1><h2 id="_1、jquery——get-请求" tabindex="-1">1、jQuery——GET 请求 <a class="header-anchor" href="#_1、jquery——get-请求" aria-label="Permalink to &quot;1、jQuery——GET 请求&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      // 发送GET请求</span></span>
<span class="line"><span style="color:#E1E4E8;">      $(&#39;button&#39;)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .eq(0)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .click(() =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">          $.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;http://localhost:8000/jQuery-server&#39;</span><span style="color:#E1E4E8;">, { a: </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">, b: </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> }, (</span><span style="color:#FFAB70;">a</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(a);</span></span>
<span class="line"><span style="color:#E1E4E8;">          });</span></span>
<span class="line"><span style="color:#E1E4E8;">        });</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      // 发送GET请求</span></span>
<span class="line"><span style="color:#24292E;">      $(&#39;button&#39;)</span></span>
<span class="line"><span style="color:#24292E;">        .eq(0)</span></span>
<span class="line"><span style="color:#24292E;">        .click(() =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">          $.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;http://localhost:8000/jQuery-server&#39;</span><span style="color:#24292E;">, { a: </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">, b: </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> }, (</span><span style="color:#E36209;">a</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(a);</span></span>
<span class="line"><span style="color:#24292E;">          });</span></span>
<span class="line"><span style="color:#24292E;">        });</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_2、jquery——post-请求" tabindex="-1">2、jQuery——POST 请求 <a class="header-anchor" href="#_2、jquery——post-请求" aria-label="Permalink to &quot;2、jQuery——POST 请求&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      /**    </span></span>
<span class="line"><span style="color:#E1E4E8;">  		 * 发送POST请求</span></span>
<span class="line"><span style="color:#E1E4E8;">       * $.post(URL,参数[Object],返回值回调函数,返回数据格式)</span></span>
<span class="line"><span style="color:#E1E4E8;">  		 * **/</span></span>
<span class="line"><span style="color:#E1E4E8;">      $(&#39;button&#39;)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .eq(1)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .click(() =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">          $.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;http://localhost:8000/jQuery-server&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            { a: </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">, b: </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">            (</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(response);</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;json&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">          );</span></span>
<span class="line"><span style="color:#E1E4E8;">        });</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      /**    </span></span>
<span class="line"><span style="color:#24292E;">  		 * 发送POST请求</span></span>
<span class="line"><span style="color:#24292E;">       * $.post(URL,参数[Object],返回值回调函数,返回数据格式)</span></span>
<span class="line"><span style="color:#24292E;">  		 * **/</span></span>
<span class="line"><span style="color:#24292E;">      $(&#39;button&#39;)</span></span>
<span class="line"><span style="color:#24292E;">        .eq(1)</span></span>
<span class="line"><span style="color:#24292E;">        .click(() =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">          $.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;http://localhost:8000/jQuery-server&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            { a: </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">, b: </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">            (</span><span style="color:#E36209;">response</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(response);</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;json&#39;</span></span>
<span class="line"><span style="color:#24292E;">          );</span></span>
<span class="line"><span style="color:#24292E;">        });</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_2、jquery——ajax-请求" tabindex="-1">2、jQuery——Ajax 请求 <a class="header-anchor" href="#_2、jquery——ajax-请求" aria-label="Permalink to &quot;2、jQuery——Ajax 请求&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      /**</span></span>
<span class="line"><span style="color:#E1E4E8;">       * 发送 Ajax请求</span></span>
<span class="line"><span style="color:#E1E4E8;">       * **/</span></span>
<span class="line"><span style="color:#E1E4E8;">      $(&#39;button&#39;)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .eq(2)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .click(() =&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">          $.</span><span style="color:#B392F0;">ajax</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 路径,</span></span>
<span class="line"><span style="color:#E1E4E8;">            url: </span><span style="color:#9ECBFF;">&#39;http://localhost:8000/delay&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//  参数对象,</span></span>
<span class="line"><span style="color:#E1E4E8;">            data: { a: </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">, b: </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 请求类型,</span></span>
<span class="line"><span style="color:#E1E4E8;">            type: </span><span style="color:#9ECBFF;">&#39;GET&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 响应体结果类型,</span></span>
<span class="line"><span style="color:#E1E4E8;">            dataType: </span><span style="color:#9ECBFF;">&#39;json&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 超时时间</span></span>
<span class="line"><span style="color:#E1E4E8;">            timeout: </span><span style="color:#79B8FF;">2000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 成功回调</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">success</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(response);</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 失败回调</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">              console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;出错了&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">          });</span></span>
<span class="line"><span style="color:#E1E4E8;">        });</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      /**</span></span>
<span class="line"><span style="color:#24292E;">       * 发送 Ajax请求</span></span>
<span class="line"><span style="color:#24292E;">       * **/</span></span>
<span class="line"><span style="color:#24292E;">      $(&#39;button&#39;)</span></span>
<span class="line"><span style="color:#24292E;">        .eq(2)</span></span>
<span class="line"><span style="color:#24292E;">        .click(() =&gt; {</span></span>
<span class="line"><span style="color:#24292E;">          $.</span><span style="color:#6F42C1;">ajax</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 路径,</span></span>
<span class="line"><span style="color:#24292E;">            url: </span><span style="color:#032F62;">&#39;http://localhost:8000/delay&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//  参数对象,</span></span>
<span class="line"><span style="color:#24292E;">            data: { a: </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">, b: </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 请求类型,</span></span>
<span class="line"><span style="color:#24292E;">            type: </span><span style="color:#032F62;">&#39;GET&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 响应体结果类型,</span></span>
<span class="line"><span style="color:#24292E;">            dataType: </span><span style="color:#032F62;">&#39;json&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 超时时间</span></span>
<span class="line"><span style="color:#24292E;">            timeout: </span><span style="color:#005CC5;">2000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 成功回调</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">success</span><span style="color:#24292E;">: (</span><span style="color:#E36209;">response</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(response);</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 失败回调</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">error</span><span style="color:#24292E;">: (</span><span style="color:#E36209;">err</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">              console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;出错了&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">          });</span></span>
<span class="line"><span style="color:#24292E;">        });</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h1 id="九、同源策略" tabindex="-1">九、同源策略 <a class="header-anchor" href="#九、同源策略" aria-label="Permalink to &quot;九、同源策略&quot;">​</a></h1><h3 id="_1-解释【同源】与【跨域】" tabindex="-1">① 解释【同源】与【跨域】： <a class="header-anchor" href="#_1-解释【同源】与【跨域】" aria-label="Permalink to &quot;① 解释【同源】与【跨域】：&quot;">​</a></h3><ul><li>同源：协议、域名、端口号 必须完全相同</li><li>跨域：违背上述同源策略就是【跨域】</li></ul><h3 id="_2-jsonp-解决跨域-仅支持-get-请求" tabindex="-1">② JSONP 解决跨域（仅支持 GET 请求） <a class="header-anchor" href="#_2-jsonp-解决跨域-仅支持-get-请求" aria-label="Permalink to &quot;② JSONP 解决跨域（仅支持 GET 请求）&quot;">​</a></h3><ul><li>页面中默认拥有跨域能力的标签有： 【script】【img】【link】【iframe】</li><li>【JSONP】通过 【script】进行跨域</li></ul><h3 id="_3-cors-解决跨域-支持-get-post-delet-put" tabindex="-1">③ CORS 解决跨域（支持 GET POST DELET PUT ） <a class="header-anchor" href="#_3-cors-解决跨域-支持-get-post-delet-put" aria-label="Permalink to &quot;③ CORS 解决跨域（支持 GET POST DELET PUT ）&quot;">​</a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP" target="_blank" rel="noreferrer">官网看看</a></p><ul><li>CORS是官方的跨域解决方案，它的特点是不需要在客户端做任何特殊的操作，完全在**【服务器】**中进行处理。跨域资源共享标准新增了一组HTTP首部字段，允许服务器声明哪些源站通过浏览器有枚限访问哪些资源</li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 设置响应头  设置允许跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">response.</span><span style="color:#B392F0;">setHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 设置响应头  设置允许跨域</span></span>
<span class="line"><span style="color:#24292E;">response.</span><span style="color:#6F42C1;">setHeader</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,54),e=[o];function r(c,t,E,y,i,b){return n(),a("div",null,e)}const h=s(p,[["render",r]]);export{d as __pageData,h as default};
