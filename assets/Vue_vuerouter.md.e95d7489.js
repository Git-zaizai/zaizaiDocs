import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.8218e65d.js";const b=JSON.parse('{"title":"Vue Router","description":"","frontmatter":{},"headers":[],"relativePath":"Vue/vuerouter.md","filePath":"Vue/vuerouter.md","lastUpdated":1711503121000}'),p={name:"Vue/vuerouter.md"},o=l(`<h1 id="vue-router" tabindex="-1">Vue Router <a class="header-anchor" href="#vue-router" aria-label="Permalink to &quot;Vue Router&quot;">​</a></h1><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p>特点：本文主要是参考了官方文档.除了不常用的过渡动效和数据获取,都进行了分析说明.</p><p>说明：每一节都在文档的基础上进行了更通俗的解释;</p><p>例子：每一节都添加了单独的例子进行详细的说明,官方没有或复杂或略过的都有详细的说明.</p><p>总结：每一节都会有 tips 注意点,实际开发的经验和总结.</p><p>使用方法：如果是新手,就从头开始看,前 5 章的内容都是逐步让你熟悉 VueRouter,并且第 5 章也给出了本地实际搭建的代码示例.</p><p>如果你对 VueRouter 有了一定了解,则可以根据目录,自行选择查看.或者全局搜索关键字快速定位.</p><h2 id="_1-概述" tabindex="-1">1, 概述 <a class="header-anchor" href="#_1-概述" aria-label="Permalink to &quot;1, 概述&quot;">​</a></h2><p>vue-router 和 vue.js 是深度集成的,适合用于单页面应用.传统的路由是用一些超链接来实现页面切换和跳转.</p><p>而 vue-router 在单页面应用中,则是组件之间的切换.<strong><code>其本质就是:建立并管理url和对应组件之间的映射关系.</code></strong></p><h2 id="_2-简单实例" tabindex="-1">2, 简单实例 <a class="header-anchor" href="#_2-简单实例" aria-label="Permalink to &quot;2, 简单实例&quot;">​</a></h2><p>这里简单先以官网的例子,了解 vue-router 有哪几大部分组成,对 vue-router 有一个初步印象.</p><p>首先是 html 部分.这里主要是两个作用:</p><p><strong>1、<code>router-link</code> 组件来导航,用户点击后切换到相关视图.</strong></p><p><strong>2、<code>router-view</code> 组件来设置切换的视图在哪里渲染.一个页面也可以有多个 <code>router-view</code> 分别展示特定的视图,并且支持嵌套</strong></p><h3 id="html" tabindex="-1">html <a class="header-anchor" href="#html" aria-label="Permalink to &quot;html&quot;">​</a></h3><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;https://unpkg.com/vue/dist/vue.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello App!&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 使用 router-link 组件来导航. --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 通过传入 \`to\` 属性指定链接. --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 \`&lt;a&gt;\` 标签 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/foo&quot;</span><span style="color:#ABB2BF;">&gt;Go to Foo&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/bar&quot;</span><span style="color:#ABB2BF;">&gt;Go to Bar&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 路由出口 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="javascript" tabindex="-1">JavaScript <a class="header-anchor" href="#javascript" aria-label="Permalink to &quot;JavaScript&quot;">​</a></h3><p>这里实际项目写法代码可以参考我后面的第 5 章.下面我就简单总结下大概分那几步:</p><ul><li>1 材料准备:</li><li>1.1 引入准备好的<code>Vue</code>和<code>vue-router</code>(前提是已经 npm)</li><li>1.2 引入路由跳转的组件.下面例子中就是<code>Foo</code>和<code>Bar</code></li><li>1.3 启动全局组件 <code>VueRouter</code> 例如：<code>Vue.use(VueRouter)</code>.这样 vue-router 才开始执行.</li><li>2 配置路由实例:通过 <code>new VueRouter()</code> 详细配置每个路由的路径,对应的组件等等所有和路由相关的配置.</li><li>3 将路由实例挂载到根实例上 <code>new Vue({router}).$mount(&#39;#app&#39;)</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 0\\. 如果使用模块化机制编程，导入Vue和VueRouter，要调用 Vue.use(VueRouter)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1\\. 定义 (路由) 组件。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 可以从其他文件 import 进来</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Foo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;foo&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Bar</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;bar&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2\\. 定义路由</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 每个路由应该映射一个组件。 其中&quot;component&quot; 可以是</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 通过 Vue.extend() 创建的组件构造器，</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 或者，只是一个组件配置对象。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 我们晚点再讨论嵌套路由。</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">routes</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">  { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/foo&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Foo</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">  { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/bar&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Bar</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3\\. 创建 router 实例，然后传 \`routes\` 配置</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 你还可以传别的配置参数, 不过先这么简单着吧。</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// (缩写) 相当于 routes: routes</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 4\\. 创建和挂载根实例。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 记得要通过 router 配置参数注入路由，</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 从而让整个应用都有路由功能</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">router</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}).</span><span style="color:#61AFEF;">$mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;#app&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 现在，应用已经启动了！</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>通过注入路由器，我们可以在任何组件内通过  <code>this.$router</code>  访问路由器，也可以通过  <code>this.$route</code>访问当前路由对象：</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>这里我简单说明下<code>$router</code>和<code>$route</code>的区别:</p><ul><li><code>$router</code>是指整个<strong>路由实例</strong>,你可以操控整个路由,通过&#39;$router.push&#39;往其中添加任意的路由对象.</li><li><code>$route</code>:是指当前路由实例(&#39;$router&#39;)跳转到的<strong>路由对象</strong>;</li><li>路由实例可以包含多个路由对象.它们是父子包含关系.</li></ul></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// Home.vue</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">username</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 我们很快就会看到 \`params\` 是什么</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$route</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">username</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">goBack</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">history</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">go</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_3-vue-router-简略图示关系" tabindex="-1">3, vue-router 简略图示关系 <a class="header-anchor" href="#_3-vue-router-简略图示关系" aria-label="Permalink to &quot;3, vue-router 简略图示关系&quot;">​</a></h2><p>图片中 router.js 就是路由实例配置文件</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/8/26/16576b4996410efb~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp" alt="vue-router简略图示关系"></p><p><strong>PS:</strong> 这里图说的有点不准确,to 并不是仅仅对应 path 值.要分具体情况,<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23to" title="https://router.vuejs.org/zh/api/#to" target="_blank" rel="noreferrer">详情查看官方 to 的 api.</a></p><h2 id="_4-学习的准备工作" tabindex="-1">4, 学习的准备工作 <a class="header-anchor" href="#_4-学习的准备工作" aria-label="Permalink to &quot;4, 学习的准备工作&quot;">​</a></h2><h3 id="_4-1-硬件准备" tabindex="-1">4.1 硬件准备 <a class="header-anchor" href="#_4-1-硬件准备" aria-label="Permalink to &quot;4.1 硬件准备&quot;">​</a></h3><p>学习一个新知识,只看然后想想.嗯,大概是这样的.这样是没有任何效果的.没有实际敲过,使用过,都算不上是你的知识.所以,<strong>强烈建议大家边看边敲边思考总结.</strong> 这里提供两种方式:</p><ul><li>官网在线实例:<a href="https://link.juejin.cn?target=https%3A%2F%2Fjsfiddle.net%2Fyyx990803%2Fxgrjzsup%2F" title="https://jsfiddle.net/yyx990803/xgrjzsup/" target="_blank" rel="noreferrer">点击这里</a>通过在线实例,按照教程边看边敲!</li><li>通过我第 5 章的教程,在自己本地的实际项目上进行构建,查看效果.</li></ul><p>这两种方式都很好.个人建议有条件的选第二种,更加直观,更加贴近自己的实际项目需求.</p><h3 id="_4-2-思想准备" tabindex="-1">4.2 思想准备 <a class="header-anchor" href="#_4-2-思想准备" aria-label="Permalink to &quot;4.2 思想准备&quot;">​</a></h3><p>学习配置 vue-router,一定要考虑两个层面:</p><ul><li>Html:对应的就是 vue-router 里的<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code></li><li>JavaScript:就是具体路由实例的配置. 整个 vue-router 的配置也是围绕这两个层面进行展开的,学习时一定要有这个意识,才更容易理解和使用!</li></ul><h2 id="_5-实际项目构建示例" tabindex="-1">5 实际项目构建示例 <a class="header-anchor" href="#_5-实际项目构建示例" aria-label="Permalink to &quot;5 实际项目构建示例&quot;">​</a></h2><h3 id="_5-1-下载-vue-router" tabindex="-1">5.1 下载 vue-router : <a class="header-anchor" href="#_5-1-下载-vue-router" aria-label="Permalink to &quot;5.1 下载 vue-router :&quot;">​</a></h3><p><code>npm i vue-router -s</code></p><h3 id="_5-2-在-vue-组件内配置-router-link-和-router-view" tabindex="-1">5.2 在 vue 组件内配置 router-link 和 router-view <a class="header-anchor" href="#_5-2-在-vue-组件内配置-router-link-和-router-view" aria-label="Permalink to &quot;5.2 在 vue 组件内配置 router-link 和 router-view&quot;">​</a></h3><ul><li>router-link:映射路由.就是创建 a 标签来定义路由导航的链接(用户通过点击实现跳转).通过 to 属性指定目标地址.默认渲染成带有正确链接的&lt;a&gt;标签.</li><li>router-view:就是在标签内渲染你路由匹配到的视图组件.router-view 支持嵌套 router-view,并且支持多个 router-view 分别渲染不同的 component.详细<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fguide%2Fessentials%2Fnamed-views.html" title="https://router.vuejs.org/zh/guide/essentials/named-views.html" target="_blank" rel="noreferrer">点击文档命名视图</a>.</li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!--这里引用官方例子的写法--&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/foo&quot;</span><span style="color:#ABB2BF;">&gt;/user/foo&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/bar&quot;</span><span style="color:#ABB2BF;">&gt;/user/bar&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;PS:写在这里,即router-view里的内容是不会显示在页面上的!&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>关于<code>to</code>的更详细用法:</strong> 可以<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23to" title="https://router.vuejs.org/zh/api/#to" target="_blank" rel="noreferrer">参考官方的 api 文档</a>.用法很简单这里我就不重复了.</p><h3 id="_5-3-配置路由实例-router-js-文件" tabindex="-1">5.3 配置路由实例 router.js 文件 <a class="header-anchor" href="#_5-3-配置路由实例-router-js-文件" aria-label="Permalink to &quot;5.3 配置路由实例 router.js 文件&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//第一步:引入必要的文件</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Vue</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">//加载全局组件时,都需要引入Vue</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Router</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue-router&#39;</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">//引入vue-router</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//引入在路由中需要用到的组件</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">User</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;@/components/user/User&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">//这里省略了.vue</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//第二步:加载Router</span></span>
<span class="line"><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Router</span><span style="color:#ABB2BF;">);</span><span style="color:#7F848E;font-style:italic;">//加载全局组件Router</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//第三步:配置路由实例</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Router</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//路由模式:默认为hash,如果改为history,则需要后端进行配合</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//mode:&#39;history&#39;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//基路径:默认值为&#39;/&#39;.如果整个单页应用在/app/下,base就应该设为&#39;/app/&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 一般可以写成,__dirname,在webpack中配置.</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//base:&#39;/&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">:[{</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/user&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;user&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//给路由命名,设置的name要唯一!</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">User</span><span style="color:#7F848E;font-style:italic;">//就是第一步import的组件</span></span>
<span class="line"><span style="color:#ABB2BF;">		},{</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#7F848E;font-style:italic;">//路由懒加载:单页面应用,首页时,加载内容时间过长.</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">//运用懒加载对页面组件进行划分,减少首页加载时间</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;/Page&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;Page&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#61AFEF;">component</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">require</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&#39;@/components/Page&#39;</span><span style="color:#ABB2BF;">],</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#7F848E;font-style:italic;">//此时component则不需要在第一步import</span></span>
<span class="line"><span style="color:#ABB2BF;">		}]</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_5-4-在-main-js-中引入-router-js-并挂载到-vue-实例" tabindex="-1">5.4 在 main.js 中引入 router.js 并挂载到 Vue 实例 <a class="header-anchor" href="#_5-4-在-main-js-中引入-router-js-并挂载到-vue-实例" aria-label="Permalink to &quot;5.4 在 main.js 中引入 router.js 并挂载到 Vue 实例&quot;">​</a></h3><p><strong>建议在实际项目中将 router 配置单独的 js 文件,更加清晰,不要都混在 main.js 中.</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./router&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">el</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;#app&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">router</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;App/&gt;&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">components</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">App</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_5-5-router-routes-route-傻傻分不清" tabindex="-1">5.5 router,routes,route 傻傻分不清? <a class="header-anchor" href="#_5-5-router-routes-route-傻傻分不清" aria-label="Permalink to &quot;5.5 router,routes,route 傻傻分不清\\?&quot;">​</a></h3><ul><li>1, router:一般指的就是路由实例.如$router.</li><li>2, routes:指 router 路由实例的 routes API.用来配置多个 route 路由对象.</li><li>3, route:指的就是路由对象.例如;$route 指的就是当前路由对象.</li></ul><h3 id="_5-6-小结" tabindex="-1">5.6 小结 <a class="header-anchor" href="#_5-6-小结" aria-label="Permalink to &quot;5.6 小结&quot;">​</a></h3><p>至此,一个基本的 vue-router 已经完成.这里只是简单示范,了解其实现步骤.</p><p>总结一下编写 vue 路由时,记住要<strong>做这三类事:</strong></p><p><strong>1,准备工作:</strong> 在 main.js 中引入 router.js 挂载到 Vue 实例中.</p><p><strong>2,配置路由实例(重点):</strong> 在 router.js 中引入 Vue,vue-router,配置路由实例.</p><p><strong>3,组件内配置:</strong> 就是配置 router-link 和 router-view.</p><h2 id="_6-vue-router-的两种模式" tabindex="-1">6 vue-router 的两种模式 <a class="header-anchor" href="#_6-vue-router-的两种模式" aria-label="Permalink to &quot;6 vue-router 的两种模式&quot;">​</a></h2><p><strong>一般单页面应用是(SPA)不会请求页面而是只更新视图.</strong></p><p>vue-router 提供了两种方式来实现前端路由:Hash 模式和 History 模式,</p><p>可以用 mode 参数来决定使用哪一种方式.</p><h3 id="_6-1-hash-模式" tabindex="-1">6.1 Hash 模式 <a class="header-anchor" href="#_6-1-hash-模式" aria-label="Permalink to &quot;6.1 Hash 模式&quot;">​</a></h3><p>vue-router 默认使用 Hash 模式.使用 url 的 hash 来模拟一个完整的 url.<code>此时url变化时,浏览器是不会重新加载的.</code>Hash(即#)是 url 的锚点,</p><p>代表的是网页中的一个位置,仅仅改变#后面部分,浏览器只会滚动对应的位置,</p><p>而不会重新加载页面.<code>#仅仅只是对浏览器进行指导,而对服务端是完全没有作用的!它不会被包括在http请求中,故也不会重新加载页面.</code></p><p>同时<strong>hash 发生变化时,url 都会被浏览器记录下来,这样你就可以使用浏览器的后退了.</strong></p><p><strong><code>总而言之:Hash模式就是通过改变#后面的值,实现浏览器渲染指定的组件.</code></strong></p><h3 id="_6-2-history-模式" tabindex="-1">6.2 History 模式 <a class="header-anchor" href="#_6-2-history-模式" aria-label="Permalink to &quot;6.2 History 模式&quot;">​</a></h3><p>如果你不喜欢 hash 这种<code>#</code>样式.可以使用 history 模式.</p><p>这种模式利用了 HTML5 History 新增的 <code>pushState</code> 和 <code>replaceState</code> 方法.</p><p>除了之前的 <code>back</code>,<code>forward</code>,<code>go</code> 方法,这两个新方法可以应用在浏览器历史记录的增加替换功能上</p><p>使用 History 模式,通过历史记录修改 url,但它不会立即向后端发送请求. <strong><code>注意点:</code></strong> 虽然 History 模式可以丢掉不美观的#,也可以正常的前进后退,</p><p>但是刷新 f5 后,此时浏览器就会访问服务器,在没有后台支持的情况下,此时就会得到一个 <code>404</code> ，</p><p>官方文档给出的描述是:&quot;不过这种模式要玩好,还需要后台配置支持.</p><p>因为我们的应用是单个客户端应用,如果后台没有正确的配置,当用户直接访问时,就会返回 404.所以呢,</p><p>你要在服务端增加一个覆盖所有情况的的候选资源;如果 url 匹配不到任何静态资源,则应该返回同一个 index.html 页面.&quot;</p><p>**<code>总而言之</code>History<code>模式就是通过 </code>pushState()\` 方法来对浏览器的浏览记录进行修改,</p><p>来达到不用请求后端来渲染的效果.不过建议,实际项目还是使用<code>history</code>模式.**</p><p><strong>例子:</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">mode</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;history&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//如果这里不写,路由默认为hash模式</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [...]</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_7-动态路由匹配" tabindex="-1">7 动态路由匹配 <a class="header-anchor" href="#_7-动态路由匹配" aria-label="Permalink to &quot;7 动态路由匹配&quot;">​</a></h2><p>当我们经常需要把某种模式匹配到所有的路由,全部都映射到同个组件.</p><p>例如:我们有一个 User 组件,对于所有 ID 各不相同的用户,都要使用这个组件来渲染.</p><p>这时我们就可以配置动态路由来实现. <strong><code>动态路由匹配本质上就是通过url进行传参</code></strong></p><h4 id="_7-1-路由对象属性介绍" tabindex="-1">7.1 路由对象属性介绍: <a class="header-anchor" href="#_7-1-路由对象属性介绍" aria-label="Permalink to &quot;7.1 路由对象属性介绍:&quot;">​</a></h4><p>为了下面理解的方便这里简单介绍下常用的路由对象属性,</p><p>在组件内可以通过<code>this.$route</code>不是<code>$router</code> 进行访问.</p><p><strong><code>$route.path</code></strong> 类型: <code>string</code> 字符串，对应当前路由的路径，总是解析为绝对路径，如 <code>&quot;/foo/bar&quot;</code>。</p><p><strong><code>$route.params</code></strong> 类型: <code>Object</code> 一个 key/value 对象，包含了动态片段和全匹配片段，如果没有路由参数，就是一个空对象。</p><p><strong><code>$route.query</code></strong> 类型: <code>Object</code> 一个 key/value 对象，表示 URL 查询参数。例如，对于路径 <code>/foo?user=1</code>，则有 <code>$route.query.user == 1</code>，如果没有查询参数，则是个空对象。</p><p><strong><code>$route.name</code></strong> 当前路由的名称，如果有的话。<strong>这里建议最好给每个路由对象命名,方便以后编程式导航.不过记住 name 必须唯一!</strong></p><p><strong><code>$route.hash</code></strong> 类型: <code>string</code> 当前路由的 hash 值 (带  <code>#</code>) ，如果没有 hash 值，则为空字符串。</p><p><strong><code>$route.fullPath</code></strong> 类型: <code>string</code> 完成解析后的 URL，包含查询参数和 hash 的完整路径。</p><p><strong><code>$route.matched</code></strong> 类型: <code>Array&lt;RouteRecord&gt;</code> 一个数组，</p><p>包含当前路由的所有嵌套路径片段的<strong>路由记录</strong> 。路由记录就是  <code>routes</code>  配置数组中的对象副本 (还有在  <code>children</code>  数组)。</p><p><strong><code>$route.redirectedFrom</code></strong> 如果存在重定向，即为重定向来源的路由的名字。</p><h4 id="_7-2-使用-params-进行配置" tabindex="-1">7.2 使用 params 进行配置: <a class="header-anchor" href="#_7-2-使用-params-进行配置" aria-label="Permalink to &quot;7.2 使用 params 进行配置:&quot;">​</a></h4><p>举个例子:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">  {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//动态路径参数,以冒号开头</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/user/:id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">User</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这样,就是使用 <code>params</code> 进行配置.像<code>/user/foo</code> 和<code>/user/bar</code>都将映射到相同的路由.</p><ul><li>一个路径参数使用<code>&#39;:&#39;</code>冒号进行标记.</li><li>当匹配到一个路由时,参数就会被设置到<code>this.$route.params</code>,可以在每个组件内使用.例如<code>/user/foo</code> 在<code>this.$route.params.id</code>就为 foo</li></ul><p>这里以官方的表格示例进行展示</p><table><thead><tr><th>模式</th><th>匹配路径</th><th>$route.params</th></tr></thead><tbody><tr><td>/user/:username</td><td>/user/evan</td><td><code>{ username: &#39;evan&#39; }</code></td></tr><tr><td>/user/:username/post/:post_id</td><td>/user/evan/post/123</td><td><code>{ username: &#39;evan&#39;, post_id: 123 }</code></td></tr></tbody></table><p>这里再举一个稍微变化一下的例子,来加深理解:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [{ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/user/:shot/foo/:id&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">shotCat</span><span style="color:#ABB2BF;"> }];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/shot/foo&quot;</span><span style="color:#ABB2BF;">&gt;/user/shot/foo&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!--无法匹配到对应路由--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/shot/cat/foo&quot;</span><span style="color:#ABB2BF;">&gt;/user/shot/cat/foo&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!--无法匹配到对应路由--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/foo/foo/foo&quot;</span><span style="color:#ABB2BF;">&gt;/user/foo/foo/foo&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!--成功匹配,$route.params.shot为foo;$route.params.cat为foo;--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/shot/foo/cat&quot;</span><span style="color:#ABB2BF;">&gt;/user/shot/foo/cat&lt;/</span><span style="color:#E06C75;">router-link</span></span>
<span class="line"><span style="color:#ABB2BF;">  &gt;</span><span style="color:#7F848E;font-style:italic;">&lt;!--成功匹配,$route.params.shot为shot;$route.params.cat为cat;--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><p>有时候,同一个路径可以匹配多个路由,此时,匹配的优先级就按照路由的定义顺序.谁先定义的,谁的优先级就最高.</p></li><li><p>由于路由参数对组件实例是复用的.例如:<code>/user/foo</code>  和  <code>/user/bar</code>在使用路由参数时,复用的都是<code>User</code>组件.此时组件的生命周期钩子不会再被调用。如果你想路径切换时,进行一些初始化操作时,可以用以下两种解决办法:</p><ul><li>在组件内 watch <code>$route</code>  对象：</li></ul></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;...&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">$route</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 对路由变化作出响应...</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>使用 2.2 版本中的 beforeRouteUpdate 路由守卫：</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;...&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeRouteUpdate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// react to route changes...</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// don&#39;t forget to call next()</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_7-3-通过-query-进行配置传参" tabindex="-1">7.3 通过 query 进行配置传参. <a class="header-anchor" href="#_7-3-通过-query-进行配置传参" aria-label="Permalink to &quot;7.3 通过 query 进行配置传参.&quot;">​</a></h4><p>在项目里我们可以通过上面提到的 params 进行传参.同时也可以用 query 进行传参</p><p>举个例子: <code>&lt;router-link to=&quot;/user?id=foo&quot;&gt;foo&lt;/router-link&gt;</code> vue-route 会自动将后的 <code>id=foo</code> 封装进 <code>this.$route.query</code> 里</p><p>此时,在组件里 <code>this.$route.query.id</code> 值为<code>foo</code>.</p><p>==除了通过<code>router-link</code>的<code>to</code>属性<code>query</code> 也可以通过后面讲到的编程式导航进行传参</p><h2 id="_8-编程式导航" tabindex="-1">8 编程式导航 <a class="header-anchor" href="#_8-编程式导航" aria-label="Permalink to &quot;8 编程式导航&quot;">​</a></h2><p>什么是编程式导航,编程式导航就是在 vue 组件内部通过<code>this.$router</code>访问路由实例,</p><p>并通过 <code>this.$router.push</code> 导航到不同的 url,</p><p>进行路由映射,所以 <strong>它的作用是和<code>&lt;router-link :to&gt;</code>是一毛一样的!</strong></p><p>当然,<strong>前提是你已经在 routes 里配置了对应的路由对象.</strong></p><p><strong>一般什么时候用到编程式导航?</strong> 如果,你想在路由跳转前做点其他事情,例如权限验证等</p><p>但是用<code>&lt;router-link&gt;</code>的话,就直接跳转了.此时就可以使用编程式导航</p><h4 id="_8-1-编程式导航的写法" tabindex="-1">8.1 编程式导航的写法 <a class="header-anchor" href="#_8-1-编程式导航的写法" aria-label="Permalink to &quot;8.1 编程式导航的写法&quot;">​</a></h4><p>编程式导航一般都是用到 router.push 方法.该方法的参数可以是一个字符串路径,或者一个描述地址的对象.例如:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//字符串</span></span>
<span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;home&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//对象</span></span>
<span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$ruter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;home&#39;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//命名路由</span></span>
<span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;user&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">userId</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2333</span><span style="color:#ABB2BF;"> } });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//带查询参数,变成/register?plan=private</span></span>
<span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;register&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">plan</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;private&#39;</span><span style="color:#ABB2BF;"> } });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>注意</strong>:==原谅色警告==:<strong><code>path</code>和<code>params</code>是不能同时生效的!</strong>,</p><p>否则 params 会被忽略掉所以使用对象写法进行 params 传参时,</p><p>要么就是<code>path</code>加冒号<code>:</code>,要么就是像上例中的&#39;命名路由&#39;,</p><p>通过 name 和 params 进行传参</p><p><strong>然而 query 却并不受影响,有没有 path 都可以进行传参.</strong></p><h4 id="_8-2-router-replace-方法" tabindex="-1">8.2 router.replace 方法 <a class="header-anchor" href="#_8-2-router-replace-方法" aria-label="Permalink to &quot;8.2 router.replace 方法&quot;">​</a></h4><p>router.replace 和 router.push 很像</p><p>写法一样.但实际效果不一样.push 是向 history 里添加新记录</p><p><strong>而 replace 是直接将当前浏览器 history 记录替换掉!</strong></p><p><strong>那最直接的后果是什么呢?</strong> 举个例子:</p><ul><li>用 push 方法,页面 1 跳转到页面 2,你使用浏览器的后退可以回到页面 1</li><li>用 replace 方法,页面 1 被替换成页面 2,你使用浏览器的后退,<strong>此时你回不到页面 1</strong>,只能回到页面 1 的前一页,页面 0.</li></ul><p><strong>那什么时候会用到 replace 呢?</strong> 当你不想让用户回退到之前的页面时,常见于权限验证,验证后就不让用户回退到登录页重复验证.</p><h4 id="_8-3-router-go-方法" tabindex="-1">8.3 <code>router.go()</code> 方法 <a class="header-anchor" href="#_8-3-router-go-方法" aria-label="Permalink to &quot;8.3 \`router.go()\` 方法&quot;">​</a></h4><p>这个方法的参数就是一个整数,意思是在 <code>history</code> 记录中前进或后退多少步.</p><p>类似 <code>window.history.go()</code>.这样就能控制页面前进或者后退多少步.</p><h2 id="_9-对动态路由和编程式导航相关的补充小结" tabindex="-1">9 对动态路由和编程式导航相关的补充小结: <a class="header-anchor" href="#_9-对动态路由和编程式导航相关的补充小结" aria-label="Permalink to &quot;9 对动态路由和编程式导航相关的补充小结:&quot;">​</a></h2><p><strong>补充:</strong> 实际上不通过 routes 配置,也可以用下面这种方法直接在<code>router-link</code>上通过<code>to</code>进行传参. <strong>关于<code>to</code>的更详细用法:</strong> 可以<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23to" target="_blank" rel="noreferrer">参考官方的 api 文档</a>.用法很简单这里我就不重复了.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;shotCat&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/shotCat&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">shotCat</span><span style="color:#ABB2BF;"> }];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">router-link</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">:to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;{ </span></span>
<span class="line"><span style="color:#98C379;">        name:&#39;shotCat&#39;,</span></span>
<span class="line"><span style="color:#98C379;">        params:{paramId:&#39;hello&#39;},</span></span>
<span class="line"><span style="color:#98C379;">        query:{queryId:&#39;world&#39;}</span></span>
<span class="line"><span style="color:#98C379;">    }&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  helloWorld</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!--此时通过name匹配到路由对象shotCat.--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">router-link</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">:to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;{ </span></span>
<span class="line"><span style="color:#98C379;">        path:&#39;/shotCat&#39;,</span></span>
<span class="line"><span style="color:#98C379;">        params:{paramId:&#39;hello&#39;},</span></span>
<span class="line"><span style="color:#98C379;">        query:{queryId:&#39;world&#39;}</span></span>
<span class="line"><span style="color:#98C379;">    }&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  helloWorld</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!--此时通过path匹配到路由对象shotCat.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">但是!!!!!此时\`paramId\`并不能添加到\`$route.params\`里,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">只有\`queryId\`成功添加到\`$route.query\`--&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>通过两个<code>router-link</code>可以发现这种写法和编程式导航的规则一毛一样, <code>path</code>和<code>params</code>是不能同时生效的!</p><p>所以建议大家最好给每个路由对象进行命名! <code>query</code>是<code>path</code>和<code>name</code>都可以正常传参的.</p><p>这里大家可以通过这个<a href="https://link.juejin.cn/?target=https%3A%2F%2Fjsfiddle.net%2Fyyx990803%2F4xfa2f19%2F" target="_blank" rel="noreferrer">官方在线例子</a>进行修改验证<code>{/{/$route.params/}/}</code>和<code>{/{/$route.query/}/}</code>是否成功传递.</p><p><strong>小结:</strong></p><ul><li>1,<code>&lt;router-link :to=&quot;{ }&quot;&gt;</code>等同于<code>this.$router.psh()</code>. <strong><code>path</code>和<code>params</code>是不能同时存在!</strong>,想通过 params,就得加上 name 属性.<code>query</code>不受影响.</li><li>2,<code>&lt;router-link :to=&quot;{ }&quot;&gt;</code>和<code>this.$router.psh()</code>的实际效果也是一样的.</li><li>2.1 <strong>params 参数都不会显示在 url 地址栏中</strong>.除了在路由中通过 routes 进行配置的.所以用户<strong>刷新页面后,params 参数就会丢失!</strong></li><li>2.2 <strong>query 参数可以正常显示在 url 地址栏中</strong>.刷新页面后也不会丢失</li></ul><p>通过<code>to</code>虽然可以进行<code>params</code>,<code>query</code>传参.但是注意此时<strong>页面 url 并不会改变!</strong>.所以你刷新页面后,参数就没有了.</p><h2 id="_10-嵌套路由与单组件多视图" tabindex="-1">10 嵌套路由与单组件多视图 <a class="header-anchor" href="#_10-嵌套路由与单组件多视图" aria-label="Permalink to &quot;10 嵌套路由与单组件多视图&quot;">​</a></h2><ul><li><strong>嵌套路由</strong>:就是父路由嵌套子路由.url 上就是/user 嵌套两个子路由后就是/user/foo 和/uer/bar.用一张图表示就是:</li></ul><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/8/26/16576c32de51d879~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp" alt="嵌套路由"></p><ul><li><strong>单组件多视图</strong>:就是一个组件里有多个视图进行展示.即包含有多个<code>&lt;router-view/&gt;</code></li></ul><h3 id="_10-1-嵌套路由" tabindex="-1">10.1 嵌套路由 <a class="header-anchor" href="#_10-1-嵌套路由" aria-label="Permalink to &quot;10.1 嵌套路由&quot;">​</a></h3><p>讲之前,必须先清楚这样一件事,<strong>一个<code>&lt;router-view/&gt;</code>对应展示的就是一个组件</strong> 因此实现嵌套路由有两个要点:</p><ul><li>路由对象中定义子路由(嵌套子路由)</li><li>组件内<code>&lt;router-view/&gt;</code>的使用.</li></ul><p>这两点也对应了我第 4 章中关于思想准备的说明.</p><p>下面我的示例还是以上图嵌套路由为例进行讲解. 理解了的可以看<a href="https://link.juejin.cn?target=https%3A%2F%2Fjsfiddle.net%2Fyyx990803%2FL7hscd8h%2F" target="_blank" rel="noreferrer">官方示例</a>是嵌套路由搭配动态路由使用的例子,大家可以在此基础上自己修改尝试.</p><h4 id="_10-1-1-路由对象中定义子路由" tabindex="-1">10.1.1 路由对象中定义子路由 <a class="header-anchor" href="#_10-1-1-路由对象中定义子路由" aria-label="Permalink to &quot;10.1.1 路由对象中定义子路由&quot;">​</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/user&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">User</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;user&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">//嵌套路由就写在 children 配置中,写法和 rutes 一样.</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">UserDefault</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;default&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">//children:[{}] 也可以继续添加 children 嵌套</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//如果/user 下没有匹配到其他子路由时,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//User 的&lt;router-view&gt;是什么都不会显示的,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//如果你想让它显示点什么.可以将 path:&#39;&#39;.设为空.此时 UserDefault 就是默认显示的组件.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">UserFoo</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//此时 path 等同于&#39;/user/foo&#39;,子路由会继承父路由的路径.</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//但是不能写成 path:&#39;/foo&#39;.因为以 / 开头的嵌套路径会被当作根路径,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//也就是说此时 foo 成了根路径.而不是 user.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;bar&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">UserBar</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;bar&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">      ],</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="_10-1-2-组件内-router-view-的使用" tabindex="-1">10.1.2 组件内<code>&lt;router-view/&gt;</code>的使用. <a class="header-anchor" href="#_10-1-2-组件内-router-view-的使用" aria-label="Permalink to &quot;10.1.2 组件内\`&lt;router-view/&gt;\`的使用.&quot;">​</a></h4><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user&quot;</span><span style="color:#ABB2BF;">&gt;/user&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/foo&quot;</span><span style="color:#ABB2BF;">&gt;/user/foo&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/user/bar&quot;</span><span style="color:#ABB2BF;">&gt;/user/bar&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!--这里展示的是User组件;同样User的&lt;router-view/&gt;也被嵌套在里面--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`</span></span>
<span class="line"><span style="color:#98C379;">    &lt;div class=&quot;user&quot;&gt;</span></span>
<span class="line"><span style="color:#98C379;">        &lt;h2&gt;User&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#98C379;">        &lt;router-view&gt;&lt;/router-view&gt;</span></span>
<span class="line"><span style="color:#98C379;">    &lt;/div&gt;\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//User的&lt;router-view&gt;里展示的就是子路由foo,bar的组件还有default默认组件</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">UserDefault</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;default&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">UserFoo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;foo&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">UserBar</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;bar&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_10-2-单组件多视图" tabindex="-1">10.2 单组件多视图 <a class="header-anchor" href="#_10-2-单组件多视图" aria-label="Permalink to &quot;10.2 单组件多视图&quot;">​</a></h3><p>如果一个组件有多个视图,来展示多个子组件.这个时候就需要用到<strong>命名视图</strong> 官方的在线示例<a href="https://link.juejin.cn?target=https%3A%2F%2Fjsfiddle.net%2Fposva%2F6du90epg%2F" target="_blank" rel="noreferrer">在这里</a>,</p><p>大家可以在此基础上自己修改尝试. 直接上我的例子:</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Named Views&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/avenger&quot;</span><span style="color:#ABB2BF;">&gt;复仇者联盟&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ironMan&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;captainAmerica&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">这里我们给其中两个视图命名为ironMan和captainAmerica;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">没有设置name的视图,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">会获得默认命名为default</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">--&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/avenger&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;avenger&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">components</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">default</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">stanLee</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">ironMan</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">ironMan</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">captainAmerica</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">captainAmerica</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">//如果有多个视图需要展示时,以前的component换成components(加上s!!),</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">//写成对象形式.左边的ironMan指的就是&lt;router-view&gt;里设置的name=&quot;ironMan&quot;;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">//右边的则指的是下面的组件ironMan.</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stanLee</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;斯坦李&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ironMan</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;钢铁侠&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">captainAmerica</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;美国队长&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>嵌套命名视图:</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fjsfiddle.net%2Fposva%2F22wgksa3%2F" target="_blank" rel="noreferrer">官方的在线示例</a>,</p><p>结合了嵌套路由和命名视图.就是两种写法的组合.<strong>建议初学者通过这个例子加深理解.</strong></p><h2 id="_11-重定向和别名" tabindex="-1">11 重定向和别名: <a class="header-anchor" href="#_11-重定向和别名" aria-label="Permalink to &quot;11 重定向和别名:&quot;">​</a></h2><h3 id="_11-1-重定向配置" tabindex="-1">11.1 重定向配置: <a class="header-anchor" href="#_11-1-重定向配置" aria-label="Permalink to &quot;11.1 重定向配置:&quot;">​</a></h3><p>重定向其实就是通过路由.拦截 path,然后替换 url 跳转到 redirect 所指定的路由上. 重定向是通过 routes 配置来完成，</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//从 /a 重定向到 /b</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [{ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/a&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">redirect</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/b&#39;</span><span style="color:#ABB2BF;"> }],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">///从 /a 重定向到 命名为&#39;foo&#39;的路由</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [{ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/a&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">redirect</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;"> } }],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//甚至是一个方法，动态返回重定向目标：</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/a&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">redirect</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 方法接收 目标路由 作为参数</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// return 重定向的 字符串路径/路径对象</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">hash</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">query</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//这里使用了ES6的解构写法,分别对应了to的hash模式,params,query参数.</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//这里解构就不具体说明了.</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">query</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;foo&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/foo&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">hash</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;#baz&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;baz&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">hash</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;/with-params/:id&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;/bar&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_11-2-别名" tabindex="-1">11.2 别名 <a class="header-anchor" href="#_11-2-别名" aria-label="Permalink to &quot;11.2 别名&quot;">​</a></h3><p>重定向是替 url 换路径,达到路由跳转.那别名就是一个路由有两个路径.两个路径都能跳转到该路由.</p><p>举个栗子:你可能大名叫&#39;赵日天&#39;,但你的小名(别名)可能就叫&#39;二狗子&#39;.</p><p>但&#39;赵日天&#39;和&#39;二狗子&#39;指代的是同一个人(路由). 别名是在 rutes 里的 alias 进行配置:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//这时,路径&#39;/fxxksky&#39;和&#39;/two-dogs&#39; 都会跳转到A</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/fxxksky&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">A</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">alias</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/two-dogs&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//当有多个别名时,alias也可以写成数组形式.</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//alias: [&#39;/two-dogs&#39;, &#39;three-dogs&#39;,&#39;four-dogs&#39;,&#39;five-dogs&#39;]</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_12-路由组件传参" tabindex="-1">12 路由组件传参 <a class="header-anchor" href="#_12-路由组件传参" aria-label="Permalink to &quot;12 路由组件传参&quot;">​</a></h2><p>路由传参,可以通过前面介绍的 params 和 query 进行传参.</p><p>但这两种传参方式,本质上都是把参数放在 url 上,通过改变 url 进行的.</p><p>这样就会造成参数和组件的高度耦合. 如果我想传参的时候,可以更自由,摆脱 url 的束缚.</p><p>这时就可以使用 rute 的 props 进行解耦.提高组件的复用,同时不改变 url.</p><p>下面就以例子进行讲解: <strong>PS:</strong> 这部分官方没有在线实例,大家可以将我下面例子的代码将之前的在线例子进行覆盖就可以了</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//路由配置:</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Hello</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//使用rute的props传参的时候,对应的组件一定要添加props进行接收,否则根本拿不到传参</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;name&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//如果this.name有值,那么name已经成功成为组件的属性,传参成功</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;Hello {{ $route.params}}和{{this.name}}&lt;/div&gt;&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">mode</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;history&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 没有传参  所以组件什么都拿不到</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Hello</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//布尔模式: props 被设置为 true，此时route.params (即此处的name)将会被设置为组件属性。</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/hello/:name&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Hello</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//对象模式: 此时就和params没什么关系了.此时的name将直接传给Hello组件.</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//注意:此时的props需为静态!</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/static&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Hello</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;world&#39;</span><span style="color:#ABB2BF;"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 函数模式:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//1,这个函数可以默认接受一个参数即当前路由对象.</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//2,这个函数返回的是一个对象.</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//3,在这个函数里你可以将静态值与路由相关值进行处理.</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/dynamic/:years&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Hello</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">dynamicPropsFn</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/attrs&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Hello</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;attrs&#39;</span><span style="color:#ABB2BF;"> } },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">dynamicPropsFn</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">route</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Date</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">getFullYear</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">parseInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">route</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">years</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;!&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">router</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">el</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;#app&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Route props&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">&gt;/&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/hello/you&quot;</span><span style="color:#ABB2BF;">&gt;/hello/you&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/static&quot;</span><span style="color:#ABB2BF;">&gt;/static&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/dynamic/1&quot;</span><span style="color:#ABB2BF;">&gt;/dynamic/1&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/attrs&quot;</span><span style="color:#ABB2BF;">&gt;/attrs&lt;/</span><span style="color:#E06C75;">router-link</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_13-路由懒加载" tabindex="-1">13 路由懒加载 <a class="header-anchor" href="#_13-路由懒加载" aria-label="Permalink to &quot;13 路由懒加载&quot;">​</a></h2><p>vue 主要用于单页面应用，此时 webpack 会打包大量文件,</p><p>这样就会造成首页需要加载资源过多,首屏时间过长,给用户一种不太友好的体验.</p><p>如果使用路由懒加载,仅在你路由跳转的时候才加载相关页面.这样首页加载的东西少了,首屏时间也减少了.</p><p>vueRouter 的懒加载主要是靠<strong>Vue 的异步组件</strong>和 <strong>Webpack 的代码分割功能</strong>，</p><p>轻松实现路由组件的懒加载。</p><p>这里写法其实我在第 5.3 章里的例子已经写过,比较简单只需要将组件以 promise 形式引入即可.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">:[</span></span>
<span class="line"><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;HelloWorld&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;">require</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&#39;@/component/HelloWorld&#39;</span><span style="color:#ABB2BF;">],</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//此时HelloWorld组件则不需要在第一步import进来</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_13-1-把组件按组分块" tabindex="-1">13.1 把组件按组分块 <a class="header-anchor" href="#_13-1-把组件按组分块" aria-label="Permalink to &quot;13.1 把组件按组分块&quot;">​</a></h3><p>把组件按组分块可以把路由下的所有组件都打包在同个异步块 (chunk) 中,</p><p>并且在 f12 的 network 里面看到动态加载的组件名字. <strong>前提条件:</strong></p><ul><li>Webpack 版本 &gt; 2.4</li><li>需要在 webpack.base.conf.js 里面的 output 里面的 filename 下面加上 chunkFileName</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">output</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">build</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">assetsRoot</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">filename</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;[name].js&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// 需要配置的地方</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">chunkFilename</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;[name].js&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">publicPath</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">env</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">NODE_ENV</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;production&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">build</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">assetsPublicPath</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">dev</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">assetsPublicPath</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>此时在引入组件时的写法需要使用 命名 chunk，一个特殊的注释语法来提供 chunk name</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Foo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">import</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* webpackChunkName: &quot;group-foo&quot; */</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./Foo.vue&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Bar</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">import</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* webpackChunkName: &quot;group-foo&quot; */</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./Bar.vue&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Baz</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">import</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* webpackChunkName: &quot;group-foo&quot; */</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./Baz.vue&#39;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_14-导航守卫" tabindex="-1">14 导航守卫 <a class="header-anchor" href="#_14-导航守卫" aria-label="Permalink to &quot;14 导航守卫&quot;">​</a></h2><p>路由导航守卫,通俗点说就是路由钩子.作用也和生命周期钩子类似,</p><p>在路由跳转过程进行操作控制. 导航守卫有很多钩子,这里我就不照搬官方文档了.这里大家自己先<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fguide%2Fadvanced%2Fnavigation-guards.html" target="_blank" rel="noreferrer">点击阅读完导航守卫</a>,然后再看我的总结和代码例子.</p><h3 id="_14-1-导航守卫分类" tabindex="-1">14.1 导航守卫分类 <a class="header-anchor" href="#_14-1-导航守卫分类" aria-label="Permalink to &quot;14.1 导航守卫分类&quot;">​</a></h3><ul><li><strong>1,全局守卫:</strong>:异步执行,每个路由跳转都会按顺序执行.</li><li>router.beforeEach 全局前置守卫</li><li>router.beforeResolve 全局解析守卫(2.5.0+) 在 beforeRouteEnter 调用之后调用.</li><li>router.afterEach 全局后置钩子 进入路由之后 <strong>注意:不支持 next()</strong>,只能写成这种形式 router.afterEach((to, from) =&gt; {});</li></ul><p>每个守卫方法接收三个参数：</p><ul><li><p><strong><code>to: Route</code></strong>: 即将要进入的目标  <a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23%25E8%25B7%25AF%25E7%2594%25B1%25E5%25AF%25B9%25E8%25B1%25A1" target="_blank" rel="noreferrer">路由对象</a></p></li><li><p><strong><code>from: Route</code></strong>: 当前导航正要离开的路由对象</p></li><li><p><strong><code>next: Function</code></strong>: 一定要调用该方法来  <strong>resolve</strong>  这个钩子。执行效果依赖  <code>next</code>  方法的调用参数。</p></li><li><p><strong><code>next()</code></strong>: 进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是  <strong>confirmed</strong> (确认的)。</p></li><li><p><strong><code>next(false)</code></strong>: 中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到  <code>from</code>  路由对应的地址。</p></li><li><p><strong><code>next(&#39;/&#39;)</code>  或者  <code>next({ path: &#39;/&#39; })</code></strong>: 跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向  <code>next</code>  传递任意位置对象，且允许设置诸如  <code>replace: true</code>、<code>name: &#39;home&#39;</code>  之类的选项以及任何用在  <a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23to" target="_blank" rel="noreferrer"><code>router-link</code>  的  <code>to</code> prop</a>  或  <a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23router-push" target="_blank" rel="noreferrer"><code>router.push</code></a>  中的选项。</p></li><li><p><strong><code>next(error)</code></strong>: (2.4.0+) 如果传入  <code>next</code>  的参数是一个  <code>Error</code>  实例，则导航会被终止且该错误会被传递给  <a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fapi%2F%23router-onerror" target="_blank" rel="noreferrer"><code>router.onError()</code></a>注册过的回调。</p></li></ul><p>官方介绍的比较简单,没有实际栗子,下面我就通过栗子再进行详细的说明</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//1,可以在main.js 或者在单独的路由配置文件router.js中进行设置</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beforeEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	...</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//2,也可以在组件内部设置</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beforeEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	...</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//3,对函数及next()的详细使用说明</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beforeEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//首先to和from 其实是一个路由对象,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//所以路由对象的属性都是可以获取到的(具体可以查看官方路由对象的api文档).</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//例如:我想获取获取to的完整路径就是to.path.获取to的子路由to.matched[0].next();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//使用时,千万不能漏写next!!!</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//next()  表示直接进入下一个钩子.</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//next(false)  中断当前导航</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//next(&#39;/path路径&#39;)或者对象形式next({path:&#39;/path路径&#39;})  跳转到path路由地址</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//next({path:&#39;/shotcat&#39;,name:&#39;shotCat&#39;,replace:true,query:{logoin:true}...})</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//这种对象的写法,可以往里面添加很多.router-link 的 to prop 和 router.push</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//中的选项(具体可以查看api的官方文档)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//全都是可以添加进去的,再说明下,replace:true表示替换当前路由地址,常用于权限判断后的路由修改.</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//next(error)的用法,(需2.4.0+)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }).</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">(()</span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//跳转失败页面</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/error&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">replace</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">back</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;"> }})</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//如果你想跳转报错后,再回调做点其他的可以使用 router.onError()</span></span>
<span class="line"><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onError</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;出错了!&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li><strong>2,路由独享的守卫:</strong> 即路由对象独享的守卫</li><li>beforeEnter:路由只独享这一个钩子,在 rutes 里配置</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/foo&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Foo</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">beforeEnter</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 使用方法和上面的beforeEach一毛一样</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><strong>3,组件内的守卫:</strong> 注意:这类路由钩子是写在组件内部的,</li><li>beforeRouteEnter 进入路由前,此时实例还没创建,无法获取到 zhis</li><li>beforeRouteUpdate (2.2) 路由复用同一个组件时</li><li>beforeRouteLeave 离开当前路由,此时可以用来保存数据,或数据初始化,或关闭定时器等等</li><li></li></ul><p>这里官方的例子说明的很详细,这里就直接进行引用了.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//在组件内部进行配置,这里的函数用法也是和beforeEach一毛一样</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Foo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`...\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeRouteEnter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 在渲染该组件的对应路由被 confirm 前调用</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 不！能！获取组件实例 \`this\`</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 因为当守卫执行前，组件实例还没被创建</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeRouteUpdate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 在当前路由改变，但是该组件被复用时调用</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 可以访问组件实例 \`this\`</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">beforeRouteLeave</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 导航离开该组件的对应路由时调用</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 可以访问组件实例 \`this\`</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_14-2-完整的导航解析流程" tabindex="-1">14.2 完整的导航解析流程 <a class="header-anchor" href="#_14-2-完整的导航解析流程" aria-label="Permalink to &quot;14.2 完整的导航解析流程&quot;">​</a></h3><p>官方文档给的说明都是文字形式的,不是特别直观.这里就不 copy 了.这里就直接以流程图的形式进行展示(这里参考了<a href="https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000012563794" title="https://segmentfault.com/a/1190000012563794" target="_blank" rel="noreferrer">这位同学的图</a>,在此感谢!).</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/8/26/16576c4a89c2687a~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp" alt="导航解析流程"></p><h2 id="_15-路由元信息" tabindex="-1">15 路由元信息 <a class="header-anchor" href="#_15-路由元信息" aria-label="Permalink to &quot;15 路由元信息&quot;">​</a></h2><h3 id="_15-1-什么是路由元信息" tabindex="-1">15.1 什么是路由元信息 <a class="header-anchor" href="#_15-1-什么是路由元信息" aria-label="Permalink to &quot;15.1 什么是路由元信息&quot;">​</a></h3><p>一句话概括:路由配置的 meta 对象里的信息. 官方栗子:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/foo&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Foo</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;bar&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Bar</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// a meta field</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">meta</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">requiresAuth</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">      ],</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>从栗子可以看出就是给路由添加了一个自定义的 meta 对象,并在里面设置了一个 requiresAuth 状态为 true.</p><h3 id="_15-2-它有什么用" tabindex="-1">15.2 它有什么用 <a class="header-anchor" href="#_15-2-它有什么用" aria-label="Permalink to &quot;15.2 它有什么用&quot;">​</a></h3><p>从下面的另一个官方栗子里已经给出了答案.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beforeEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">next</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">matched</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">some</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">record</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">record</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">requiresAuth</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//对matched不了解的建议看官方api文档,或我7.1节的说明</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//数组some方法,如果meta.requiresAuth为ture,则返回true.此时,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//说明进入该路由前需要判断用户是否已经登录</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">auth</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loggedIn</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">//如果没登录,则跳转到登录页</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/login&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//官方例子的这个小细节很好,通过query将要跳转的路由路径保存下来,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//待完成登录后,就可以直接获取该路径,直接跳转到登录前要去的路由</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">redirect</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">fullPath</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 确保一定要调用 next()</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>我们可以通过在 <code>meta</code> 里设置的状态,来判断是否需要进行登录验证.如果 <code>meta</code> 里的 <code>requiresAuth</code> 为 <code>true</code>,则需要判断是否已经登录,没登录就跳转到登录页.如果已登录则继续跳转.</p><p>此时,可能会有同学说,前面说的 <code>path</code>,<code>params</code>,<code>query</code> 都可以存储信息,作为登录验证的状态标记.的确,它们也可以达到同样的效果.</p><p>如果是少量单个的验证,使用它们问题不大. 但如果是多个路由都需要进行登录验证呢<code>path</code>,<code>params</code>,<code>query</code> 是把信息显性地存储在 <code>url</code> 上的.</p><p>并且多个路径都把一个相同的状态信息加在 <code>url</code> 上.这样就使 <code>url</code> 不再单纯,并且也很不优雅美观. 所以要优雅要隐性地传递信息,就使用 <code>meta</code> 对象吧</p><h2 id="_16-滚动行为" tabindex="-1">16 滚动行为 <a class="header-anchor" href="#_16-滚动行为" aria-label="Permalink to &quot;16 滚动行为&quot;">​</a></h2><p>当年切换路由时,可以使页面滚动到你想要的某个地方,或者是保持之前滚动的位置,这时你就需要使用 scrollBehavior 这个方法.</p><p><strong>注意点:</strong></p><ul><li>这里控制和记住的滚动位置都是仅对整个组件页面而言的,并不包含你组件里面其他的滚动条.</li><li>这里路由的模式只能是 history.因为它使用了 History 新增的 <code>pushState()</code>.具体可以看我<a href="#6-vue-router-的两种模式">第 6 章</a>的说明.</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">mode</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;history&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#7F848E;font-style:italic;">//这个不能忘,默认是hash模式</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">: [...],</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">scrollBehavior</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#7F848E;font-style:italic;">// to：要进入的目标路由对象，到哪里去.和导航守卫的beforeEach一样</span></span>
<span class="line"><span style="color:#ABB2BF;">	 </span><span style="color:#7F848E;font-style:italic;">//from：离开的路由对象，哪里来</span></span>
<span class="line"><span style="color:#ABB2BF;">	 </span><span style="color:#7F848E;font-style:italic;">//savedPosition: 点击前进/后退的时候记录值{x:?,y:?}.并且只有通过浏览器的前进后退才会触发.</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// return 期望滚动到哪个的位置 { x: number, y: number }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//或者是{ selector: string, offset? : { x: number, y: number }},</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//这里selector接收字符串形式的hash,如&#39;#foo&#39;,同时你还可以通过offset设置偏移,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//版本需要大于2.6+</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#7F848E;font-style:italic;">//举个实例</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savePosition</span><span style="color:#ABB2BF;">) { </span><span style="color:#7F848E;font-style:italic;">//如果是浏览器的前进后退就,返回之前保存的位置</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">savePosition</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hash</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;">//如果存在hash,就滚动到hash所在位置</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">selector</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hash</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">y</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">}</span><span style="color:#7F848E;font-style:italic;">//否则就滚动到顶部</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="完结" tabindex="-1">完结 <a class="header-anchor" href="#完结" aria-label="Permalink to &quot;完结&quot;">​</a></h2>`,238),e=[o];function r(t,c,B,i,y,u){return n(),a("div",null,e)}const A=s(p,[["render",r]]);export{b as __pageData,A as default};
