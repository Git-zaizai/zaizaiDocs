import{_ as n,o as a,c as p,Q as l}from"./chunks/framework.7518ccd6.js";const o="/zaizaiDocs/assets/image.e57de781.png",e="/zaizaiDocs/assets/xinjianenjian.689b0817.png",r="/zaizaiDocs/assets/kaifazheshezhi.999a41fa.png",s="/zaizaiDocs/assets/fukuai.bf3c6a4a.png",m=JSON.parse('{"title":"å°ç¨‹åºéšç¬”","description":"","frontmatter":{},"headers":[],"relativePath":"éšç¬”è®°/å°ç¨‹åºéšç¬”.md","filePath":"éšç¬”è®°/å°ç¨‹åºéšç¬”.md","lastUpdated":1722251927000}'),c={name:"éšç¬”è®°/å°ç¨‹åºéšç¬”.md"},t=l('<h1 id="å°ç¨‹åºéšç¬”" tabindex="-1">å°ç¨‹åºéšç¬” <a class="header-anchor" href="#å°ç¨‹åºéšç¬”" aria-label="Permalink to &quot;å°ç¨‹åºéšç¬”&quot;">â€‹</a></h1><h2 id="åŸç”Ÿå¾®ä¿¡å°ç¨‹åº-æ¨¡å—åŒ–" tabindex="-1">åŸç”Ÿå¾®ä¿¡å°ç¨‹åº æ¨¡å—åŒ– <a class="header-anchor" href="#åŸç”Ÿå¾®ä¿¡å°ç¨‹åº-æ¨¡å—åŒ–" aria-label="Permalink to &quot;åŸç”Ÿå¾®ä¿¡å°ç¨‹åº æ¨¡å—åŒ–&quot;">â€‹</a></h2><p>æˆªæ­¢ 2024-2-23ï¼Œç›®å‰å¾®ä¿¡å°ç¨‹åºçš„æ¨¡å—åŒ–é»˜è®¤ä¸º <code>commonJS </code> ,å¦‚æœä½ æƒ³ä½¿ç”¨ <code>ES Module</code> å°±å¿…éœ€è¦æ‰“å¼€ <code>es6è½¬es5</code> çš„ç¼–è¯‘é¡¹ç›®</p><blockquote><p>è¿™æ ·ä¼šæŠŠæ‰€æœ‰ es6 çš„ä»£ç å…¨éƒ¨è½¬æ¢è½¬æ¢ä¸º es5ï¼Œä½†æ˜¯ä½ åˆä¸æƒ³è½¬æ¢å…¶ä»–çš„ es6 ä»£ç  ä½ å°±å¾—è€ƒè™‘ä½ çš„é¡¹ç›®éœ€æ±‚ï¼Œå¦‚æœä½ ä¸æƒ³æŠŠé¡¹ç›®ä½“ç§¯å°åº—å°±ä¸æ‰“å¼€ <code>es6è½¬es5</code> å¦‚æœä½ æƒ³ä½¿ç”¨ <code>ES Module</code> ä¸è€ƒè™‘å…¶ä»–é‚£å°±éšæ„</p></blockquote><p><img src="'+o+'" alt="alt text"></p><h2 id="åŸç”Ÿå¾®ä¿¡å°ç¨‹åº-ç¯å¢ƒå˜é‡-æ–¹æ¡ˆ" tabindex="-1">åŸç”Ÿå¾®ä¿¡å°ç¨‹åº <code>ç¯å¢ƒå˜é‡</code> æ–¹æ¡ˆ <a class="header-anchor" href="#åŸç”Ÿå¾®ä¿¡å°ç¨‹åº-ç¯å¢ƒå˜é‡-æ–¹æ¡ˆ" aria-label="Permalink to &quot;åŸç”Ÿå¾®ä¿¡å°ç¨‹åº `ç¯å¢ƒå˜é‡` æ–¹æ¡ˆ&quot;">â€‹</a></h2><h3 id="wx-getaccountinfosync-å®˜æ–¹æä¾›çš„-api" tabindex="-1"><code>wx.getAccountInfoSync</code> å®˜æ–¹æä¾›çš„ API <a class="header-anchor" href="#wx-getaccountinfosync-å®˜æ–¹æä¾›çš„-api" aria-label="Permalink to &quot;`wx.getAccountInfoSync` å®˜æ–¹æä¾›çš„ API&quot;">â€‹</a></h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/account-info/wx.getAccountInfoSync.html" target="_blank" rel="noreferrer">æ–‡æ¡£ï¼šè·å–å°ç¨‹åºå½“å‰ç‰ˆæœ¬ä¿¡æ¯</a></p><div class="danger custom-block"><p class="custom-block-title">ç¼ºç‚¹ï¼š</p><p>åœ¨æå®¡æ—¶æœ‰è·Ÿé—®é¢˜ï¼Œæå®¡çš„ç‰ˆæœ¬ä¼šè®¤ä¸ºæ˜¯ develop ç‰ˆå¯¼è‡´è¯·æ±‚çš„æ•°æ®æ˜¯æµ‹è¯•ç‰ˆçš„ï¼Œç„¶åè¢«å®¡æ ¸æ‹’ç»ã€‚</p><p>å¤„ç†åŠæ³•ï¼š develop ç¯å¢ƒçš„æ¥å£æ•°æ®å°½é‡æ¨¡æ‹Ÿæ­£å¼ç¯å¢ƒçš„æ¥å£æ•°æ® è·å–ç›´æ¥æ”¾æ­£å¼ç¯å¢ƒçš„æ¥å£æ•°æ®</p></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// è‡ªåŠ¨æ ¹æ®ç‰ˆæœ¬åˆ‡æ¢æ¥å£è¯·æ±‚åœ°å€</span></span>\n<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">miniProgram</span><span style="color:#ABB2BF;">: { </span><span style="color:#E5C07B;">envVersion</span><span style="color:#ABB2BF;"> } } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">wx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getAccountInfoSync</span><span style="color:#ABB2BF;">();</span></span>\n<span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">envVersion</span><span style="color:#ABB2BF;">) {</span></span>\n<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;develop&#39;</span><span style="color:#ABB2BF;">:</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">defaultConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">devUrl</span><span style="color:#C678DD;">}${</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;trial&#39;</span><span style="color:#ABB2BF;">:</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">defaultConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">devUrl</span><span style="color:#C678DD;">}${</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;release&#39;</span><span style="color:#ABB2BF;">:</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">defaultConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prodUrl</span><span style="color:#C678DD;">}${</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">:</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">defaultConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">baseUrl</span><span style="color:#C678DD;">}${</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">}</span></span>\n<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">url</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="æ„å»ºnpmåŠŸèƒ½-æ–¹æ¡ˆ" tabindex="-1"><code>æ„å»ºnpmåŠŸèƒ½</code> æ–¹æ¡ˆ <a class="header-anchor" href="#æ„å»ºnpmåŠŸèƒ½-æ–¹æ¡ˆ" aria-label="Permalink to &quot;`æ„å»ºnpmåŠŸèƒ½` æ–¹æ¡ˆ&quot;">â€‹</a></h3><p>å®‰è£…äº†æ’ä»¶å¹¶æ„å»º npm ä¹‹åï¼Œç‚¹ä¸Šä¼ ä»£ç ï¼Œ<code>node_modules</code> æ–‡ä»¶å¤¹æ˜¯ä¸ä¼šä¸Šä¼ çš„ï¼Œ <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html#packOptions" target="_blank" rel="noreferrer">project.config.json</a>é…ç½®é¡¹ä¸­çš„ packOptions.ignore å­—æ®µï¼Œ ç”¨ä»¥é…ç½®æ‰“åŒ…æ—¶å¯¹ç¬¦åˆæŒ‡å®šè§„åˆ™çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è¿›è¡Œå¿½ç•¥ï¼Œä»¥è·³è¿‡æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œè¿™äº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å°†ä¸ä¼šå‡ºç°åœ¨é¢„è§ˆæˆ–ä¸Šä¼ çš„ç»“æœå†…</p><p>é¦–å…ˆåœ¨æ ¹ç›®å½•æ–°å»ºå„ç§æ–‡ä»¶ <code>æŒ‰ç…§è‡ªå·±ä¹ æƒ¯å°±å¥½</code></p><p><img src="'+e+`" alt="alt text"></p><p>æ¥ç€åœ¨ç»ˆç«¯æ‰§è¡Œ <code>npm init</code>ï¼Œç„¶ååœ¨ <code>package.json</code>ä¸­è¿›è¡Œé…ç½®</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">&quot;type&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;module&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">&quot;build&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;SET NODE_ENV=production &amp;&amp; node ./build/index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;SET NODE_ENV=development &amp;&amp; node ./build/index.js&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç„¶ååœ¨å¼€å‘è€…å·¥å…·è®¾ç½®</p><p><img src="`+r+`" alt="alt text"></p><p>æœ€åç¼–å†™ <code>./build/index.js</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">fs</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;node:fs&#39;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;node:path&#39;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">fileURLToPath</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;url&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">__dirname</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dirname</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">fileURLToPath</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ph</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__dirname</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;../&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">NODE_ENV</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">env</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">NODE_ENV</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">config</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">files</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readdirSync</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ph</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">v</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">includes</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;.env&#39;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">envFile</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">NODE_ENV</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;development&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">files</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">files</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readFileSync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ph</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">envFile</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/\\r\\n/</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">sv</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">svs</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">sv</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">config</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">svs</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">()] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">svs</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;&#39;</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">config</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`module.exports.</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">key</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">config</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">||</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;&#39;&#39;&quot;</span><span style="color:#C678DD;">}</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;">\`</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">writeFileSync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__dirname</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;../env.js&#39;</span><span style="color:#ABB2BF;">), </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>æå®Œï¼Œæ”¶å·¥ ğŸ˜</p><h2 id="å…³äº-æŸäº›æ–¹æ³•éœ€è¦å†ç‚¹å‡»äº‹ä»¶ä¸­æ‰èƒ½è°ƒç”¨" tabindex="-1">å…³äº <code>æŸäº›æ–¹æ³•éœ€è¦å†ç‚¹å‡»äº‹ä»¶ä¸­æ‰èƒ½è°ƒç”¨</code> <a class="header-anchor" href="#å…³äº-æŸäº›æ–¹æ³•éœ€è¦å†ç‚¹å‡»äº‹ä»¶ä¸­æ‰èƒ½è°ƒç”¨" aria-label="Permalink to &quot;å…³äº \`æŸäº›æ–¹æ³•éœ€è¦å†ç‚¹å‡»äº‹ä»¶ä¸­æ‰èƒ½è°ƒç”¨\`&quot;">â€‹</a></h2><p>è¿™ä¸ªå¤§æ¦‚æ˜¯æ ¹æ®å‡½æ•°è°ƒç”¨çš„å±‚æ•°æ¥è®¡ç®—çš„ã€‚</p><h2 id="æ‰«ç -å¾®ä¿¡å†…-h5-æ”¯ä»˜" tabindex="-1">æ‰«ç  å¾®ä¿¡å†… h5 æ”¯ä»˜ <a class="header-anchor" href="#æ‰«ç -å¾®ä¿¡å†…-h5-æ”¯ä»˜" aria-label="Permalink to &quot;æ‰«ç  å¾®ä¿¡å†… h5 æ”¯ä»˜&quot;">â€‹</a></h2><h3 id="æ–¹æ¡ˆä¸€" tabindex="-1">æ–¹æ¡ˆä¸€ <a class="header-anchor" href="#æ–¹æ¡ˆä¸€" aria-label="Permalink to &quot;æ–¹æ¡ˆä¸€&quot;">â€‹</a></h3><p>ç”¨æˆ·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«=&gt;æ‰“å¼€å¾®ä¿¡ H5=&gt; <img src="`+s+'" alt="alt text"></p><p>=&gt; è¾“å…¥é‡‘é¢é€‰æ‹©å¾®ä¿¡æ”¯ä»˜æ–¹å¼(ä½†æ˜¯æ²¡æœ‰ç™»å½•)</p><p>=&gt; ç‚¹å‡»ä»˜æ¬¾ ï¼ˆéœ€è¦ç™»å½•ï¼‰ è¯·æ±‚åç«¯è¿”å›äº† ctffront.gdctfsz.com/mp è¿™ä¸ªç›®å½•çš„ url ç„¶åä½ éœ€è¦ window.location.href = url ç„¶åå°±è·³è¿‡å»å¾®ä¿¡çš„ç™»å½•ç½‘é¡µ ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä¸­å°±æ˜¯é™é»˜ç™»å½•äº†ï¼‰ ç„¶åä»–ä¼šåœ¨è·³è½¬è·³è½¬</p><p>=&gt; è·³è½¬åˆ°è¾¾ æœåŠ¡å™¨çš„æ–‡ä»¶ å®ƒä¼šè‡ªåŠ¨è°ƒç”¨æ”¯ä»˜ æ”¯ä»˜å®Œæˆåœ¨å›æ¥</p><p>=ã€‹ <img src="'+s+'" alt="alt text"></p><p>=&gt; å›æ¥äº† æŸ¥è¯¢æ”¯ä»˜ç»“æœï¼Œç„¶åæç¤ºæ”¯ä»˜çŠ¶æ€</p><h3 id="æ–¹æ¡ˆäºŒ" tabindex="-1">æ–¹æ¡ˆäºŒ <a class="header-anchor" href="#æ–¹æ¡ˆäºŒ" aria-label="Permalink to &quot;æ–¹æ¡ˆäºŒ&quot;">â€‹</a></h3><p>ç”¨æˆ·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«=&gt;</p><p>æ‰“å¼€å¾®ä¿¡ H5=&gt;æ¥åˆ°è¿™æ ·é¡µé¢</p><p><img src="'+s+`" alt="alt text"></p><p>=&gt; è¾“å…¥é‡‘é¢é€‰æ‹©å¾®ä¿¡æ”¯ä»˜æ–¹å¼ (ä½†æ˜¯æ²¡æœ‰ç™»å½•)</p><p>=&gt; ç‚¹å‡»ä»˜æ¬¾ ï¼ˆéœ€è¦ç™»å½•ï¼‰</p><p>é¦–å…ˆï¼ˆé™é»˜ç™»å½•ï¼‰ï¼Œå…ˆè·³è½¬å»è¿™ä¸ªé¡µé¢è¿›è¡Œ <code>é™é»˜ç™»å½•</code></p><p><a href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx520c15f417810387&amp;redirect_uri=%60%7B%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E7%9A%84URL%7D%60&amp;response_type=code&amp;scope=snsapi_base&amp;state=123#wechat_redirect" target="_blank" rel="noreferrer">https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx520c15f417810387&amp;redirect_uri=\`{å½“å‰é¡µé¢çš„URL}\`&amp;response_type=code&amp;scope=snsapi_base&amp;state=123#wechat_redirect</a></p><p><code>é™é»˜ç™»å½•</code> å®Œæˆåè·³è½¬å›æ¥ <code>ä½ çš„ä»˜æ¬¾é¡µé¢</code></p><p>æ‹¿ä½ éœ€è¦æ‹¿çš„æ•°æ®ï¼Œç„¶åè·å–<code>è®¢å•å·</code></p><p>ç„¶åè°ƒèµ·æ”¯ä»˜ <code>è°ƒç”¨ä¸‹é¢çš„å‡½æ•°</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onBridgeReady</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">WeixinJSBridge</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">invoke</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#98C379;">&#39;getBrandWCPayRequest&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">appId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;wx2421b1c4370ec43b&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//å…¬ä¼—å·IDï¼Œç”±å•†æˆ·ä¼ å…¥</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">timeStamp</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;1395712654&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">nonceStr</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;e61463f8efa94090b1f366cccfbbb444&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//éšæœºä¸²</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">package</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;prepay_id=u802345jgfjsdfgsdg888&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">signType</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;MD5&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//å¾®ä¿¡ç­¾åæ–¹å¼ï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">paySign</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;70EA570631E4BB79628FBCA90534C63FF7FADD89&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">//å¾®ä¿¡ç­¾å</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">err_msg</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;get_brand_wcpay_request:ok&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//res.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å›okï¼Œä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  )</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è°ƒç”¨æ–¹æ³•</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">WeixinJSBridge</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;undefined&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">addEventListener</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;WeixinJSBridgeReady&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">onBridgeReady</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">attachEvent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attachEvent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;WeixinJSBridgeReady&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">onBridgeReady</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attachEvent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;onWeixinJSBridgeReady&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">onBridgeReady</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">onBridgeReady</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>=&gt; ç”¨æˆ·æ”¯ä»˜å®Œæˆ</p><p>åœ¨å›è°ƒå¤„ç†æ”¯ä»˜å®Œæˆå</p><p><code>æ³¨</code>: ä¸€èˆ¬æƒ…å†µä¸‹ æç¤ºæ”¯ä»˜æˆåŠŸ ä¹‹å‰å…ˆæ˜¯å‘åç«¯æŸ¥è¯¢æ”¯ä»˜æˆåŠŸæ‰æç¤ºæ”¯ä»˜æˆåŠŸï¼Œåä¹‹å¤±è´¥</p><p>è¿™ä¸ªå›è°ƒä¸­ä¸èƒ½ç›´æ¥ç¡®è®¤æ”¯ä»˜æˆåŠŸ</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">err_msg</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;get_brand_wcpay_request:ok&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//res.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å›okï¼Œä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,48),B=[t];function y(i,F,A,C,d,b){return a(),p("div",null,B)}const E=n(c,[["render",y]]);export{m as __pageData,E as default};
